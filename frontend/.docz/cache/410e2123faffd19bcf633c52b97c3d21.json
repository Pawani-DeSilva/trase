{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx","mtime":1548345115622},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport uniq from 'lodash/uniq';\nimport capitalize from 'lodash/capitalize';\nimport cx from 'classnames';\nimport Dropdown from 'react-components/shared/dropdown.component';\nimport YearsSelector from 'react-components/nav/filters-nav/years-selector/years-selector.container';\nimport 'react-components/shared/sentence-selector/sentence-selector.scss';\n\nvar SentenceSelector =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(SentenceSelector, _React$PureComponent);\n\n  function SentenceSelector() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SentenceSelector);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SentenceSelector)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onSelectCommodity\", function (selectedCommodity) {\n      var _this$props = _this.props,\n          contexts = _this$props.contexts,\n          selectedContext = _this$props.selectedContext;\n      var countryNames = contexts.filter(function (c) {\n        return c.commodityName === selectedCommodity.toUpperCase();\n      }).map(function (c) {\n        return c.countryName;\n      });\n      var selectedCountry = countryNames.find(function (c) {\n        return c === selectedContext.countryName;\n      }) || countryNames[0];\n\n      _this.selectContextId(selectedCountry, selectedCommodity.toUpperCase());\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onSelectCountry\", function (selectedCountry) {\n      var _this$props2 = _this.props,\n          contexts = _this$props2.contexts,\n          selectedContext = _this$props2.selectedContext;\n      var commodityNames = contexts.filter(function (c) {\n        return c.countryName === selectedCountry.toUpperCase();\n      }).map(function (c) {\n        return c.commodityName;\n      });\n      var selectedCommodity = commodityNames.find(function (c) {\n        return c === selectedContext.commodityName;\n      }) || commodityNames[0];\n\n      _this.selectContextId(selectedCountry.toUpperCase(), selectedCommodity);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getCommodityClassName\", function (elem) {\n      var _this$props3 = _this.props,\n          selectedCountryPairs = _this$props3.selectedCountryPairs,\n          selectedContext = _this$props3.selectedContext;\n\n      if (selectedCountryPairs[selectedContext.countryName].includes(elem.toUpperCase())) {\n        return '';\n      }\n\n      return '-faded';\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getCountryClassName\", function (elem) {\n      var _this$props4 = _this.props,\n          selectedCommodityPairs = _this$props4.selectedCommodityPairs,\n          selectedContext = _this$props4.selectedContext;\n\n      if (selectedCommodityPairs[selectedContext.commodityName].includes(elem.toUpperCase())) {\n        return '';\n      }\n\n      return '-faded';\n    });\n\n    return _this;\n  }\n\n  _createClass(SentenceSelector, [{\n    key: \"getContextId\",\n    value: function getContextId(selectedCountry, selectedCommodity) {\n      var contexts = this.props.contexts;\n      var context = contexts.find(function (c) {\n        return c.countryName === selectedCountry && c.commodityName === selectedCommodity;\n      }) || {};\n      return context.id;\n    }\n  }, {\n    key: \"selectContextId\",\n    value: function selectContextId(selectedCommodity, selectedCountry) {\n      var selectContextById = this.props.selectContextById;\n      var contextId = this.getContextId(selectedCommodity, selectedCountry);\n\n      if (contextId) {\n        selectContextById(contextId);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props5 = this.props,\n          contexts = _this$props5.contexts,\n          className = _this$props5.className,\n          selectedContext = _this$props5.selectedContext,\n          selectedYears = _this$props5.selectedYears,\n          currentDropdown = _this$props5.currentDropdown,\n          toggleDropdown = _this$props5.toggleDropdown;\n      if (!selectedContext) return null;\n      var commodityName = selectedContext.commodityName,\n          countryName = selectedContext.countryName;\n      var commodityNames = uniq(contexts.map(function (c) {\n        return c.commodityName.toLowerCase();\n      }));\n      var countryNames = uniq(contexts.map(function (c) {\n        return capitalize(c.countryName);\n      }));\n      return React.createElement(\"div\", {\n        className: cx('c-sentence-selector', className)\n      }, React.createElement(\"div\", {\n        className: \"sentence-selector-text\"\n      }, \"What are the sustainability risks and opportunities associated\", ' ', React.createElement(\"br\", {\n        className: \"hide-for-small\"\n      }), \" with the trade of\", React.createElement(Dropdown, {\n        value: commodityName.toLowerCase(),\n        valueList: commodityNames,\n        onValueSelected: this.onSelectCommodity,\n        getItemClassName: this.getCommodityClassName\n      }), \"from\", React.createElement(Dropdown, {\n        value: capitalize(countryName),\n        valueList: countryNames,\n        onValueSelected: this.onSelectCountry,\n        getItemClassName: this.getCountryClassName\n      }), React.createElement(\"span\", {\n        className: \"hide-for-small\"\n      }, \"in the year\", selectedYears[0] !== selectedYears[1] ? 's' : '', React.createElement(YearsSelector, {\n        className: \"years-selector\",\n        onToggle: toggleDropdown,\n        dropdownClassName: \"-big\",\n        currentDropdown: currentDropdown\n      }))));\n    }\n  }]);\n\n  return SentenceSelector;\n}(React.PureComponent);\n\nSentenceSelector.propTypes = {\n  className: PropTypes.string,\n  contexts: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number,\n    commodityName: PropTypes.string,\n    countryName: PropTypes.string,\n    isDefault: PropTypes.bool\n  })),\n  toggleDropdown: PropTypes.func,\n  selectedYears: PropTypes.array,\n  currentDropdown: PropTypes.string,\n  selectContextById: PropTypes.func,\n  selectedContext: PropTypes.object,\n  selectedCountryPairs: PropTypes.object,\n  selectedCommodityPairs: PropTypes.object\n};\nvar _default = SentenceSelector;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_typeof, \"_typeof\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_classCallCheck, \"_classCallCheck\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_defineProperties, \"_defineProperties\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_createClass, \"_createClass\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_possibleConstructorReturn, \"_possibleConstructorReturn\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_getPrototypeOf, \"_getPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_inherits, \"_inherits\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_setPrototypeOf, \"_setPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_assertThisInitialized, \"_assertThisInitialized\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_defineProperty, \"_defineProperty\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(SentenceSelector, \"SentenceSelector\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/sentence-selector/sentence-selector.component.jsx"],"names":["SentenceSelector","React","PureComponent","contexts","selectedContext","countryNames","c","selectedCommodity","selectedCountry","commodityNames","context","selectContextById","contextId","selectedCountryPairs","elem","selectedCommodityPairs","className","selectedYears","currentDropdown","toggleDropdown","commodityName","countryName","uniq","capitalize","cx","getCommodityClassName","getCountryClassName","PropTypes","id","isDefault","bool","object"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport uniq from 'lodash/uniq';\nimport capitalize from 'lodash/capitalize';\nimport cx from 'classnames';\nimport Dropdown from 'react-components/shared/dropdown.component';\nimport YearsSelector from 'react-components/nav/filters-nav/years-selector/years-selector.container';\n\nimport 'react-components/shared/sentence-selector/sentence-selector.scss';\n\nclass SentenceSelector extends React.PureComponent {\n  onSelectCommodity = selectedCommodity => {\n    const { contexts, selectedContext } = this.props;\n\n    const countryNames = contexts\n      .filter(c => c.commodityName === selectedCommodity.toUpperCase())\n      .map(c => c.countryName);\n\n    const selectedCountry =\n      countryNames.find(c => c === selectedContext.countryName) || countryNames[0];\n\n    this.selectContextId(selectedCountry, selectedCommodity.toUpperCase());\n  };\n\n  onSelectCountry = selectedCountry => {\n    const { contexts, selectedContext } = this.props;\n\n    const commodityNames = contexts\n      .filter(c => c.countryName === selectedCountry.toUpperCase())\n      .map(c => c.commodityName);\n\n    const selectedCommodity =\n      commodityNames.find(c => c === selectedContext.commodityName) || commodityNames[0];\n\n    this.selectContextId(selectedCountry.toUpperCase(), selectedCommodity);\n  };\n\n  getContextId(selectedCountry, selectedCommodity) {\n    const { contexts } = this.props;\n\n    const context =\n      contexts.find(\n        c => c.countryName === selectedCountry && c.commodityName === selectedCommodity\n      ) || {};\n\n    return context.id;\n  }\n\n  selectContextId(selectedCommodity, selectedCountry) {\n    const { selectContextById } = this.props;\n    const contextId = this.getContextId(selectedCommodity, selectedCountry);\n\n    if (contextId) {\n      selectContextById(contextId);\n    }\n  }\n\n  getCommodityClassName = elem => {\n    const { selectedCountryPairs, selectedContext } = this.props;\n    if (selectedCountryPairs[selectedContext.countryName].includes(elem.toUpperCase())) {\n      return '';\n    }\n\n    return '-faded';\n  };\n\n  getCountryClassName = elem => {\n    const { selectedCommodityPairs, selectedContext } = this.props;\n    if (selectedCommodityPairs[selectedContext.commodityName].includes(elem.toUpperCase())) {\n      return '';\n    }\n\n    return '-faded';\n  };\n\n  render() {\n    const {\n      contexts,\n      className,\n      selectedContext,\n      selectedYears,\n      currentDropdown,\n      toggleDropdown\n    } = this.props;\n\n    if (!selectedContext) return null;\n\n    const { commodityName, countryName } = selectedContext;\n\n    const commodityNames = uniq(contexts.map(c => c.commodityName.toLowerCase()));\n    const countryNames = uniq(contexts.map(c => capitalize(c.countryName)));\n\n    return (\n      <div className={cx('c-sentence-selector', className)}>\n        <div className=\"sentence-selector-text\">\n          What are the sustainability risks and opportunities associated{' '}\n          <br className=\"hide-for-small\" /> with the trade of\n          <Dropdown\n            value={commodityName.toLowerCase()}\n            valueList={commodityNames}\n            onValueSelected={this.onSelectCommodity}\n            getItemClassName={this.getCommodityClassName}\n          />\n          from\n          <Dropdown\n            value={capitalize(countryName)}\n            valueList={countryNames}\n            onValueSelected={this.onSelectCountry}\n            getItemClassName={this.getCountryClassName}\n          />\n          <span className=\"hide-for-small\">\n            in the year{selectedYears[0] !== selectedYears[1] ? 's' : ''}\n            <YearsSelector\n              className=\"years-selector\"\n              onToggle={toggleDropdown}\n              dropdownClassName=\"-big\"\n              currentDropdown={currentDropdown}\n            />\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nSentenceSelector.propTypes = {\n  className: PropTypes.string,\n  contexts: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number,\n      commodityName: PropTypes.string,\n      countryName: PropTypes.string,\n      isDefault: PropTypes.bool\n    })\n  ),\n  toggleDropdown: PropTypes.func,\n  selectedYears: PropTypes.array,\n  currentDropdown: PropTypes.string,\n  selectContextById: PropTypes.func,\n  selectedContext: PropTypes.object,\n  selectedCountryPairs: PropTypes.object,\n  selectedCommodityPairs: PropTypes.object\n};\n\nexport default SentenceSelector;\n"]}]}
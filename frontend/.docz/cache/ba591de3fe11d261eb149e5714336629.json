{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx","mtime":1548345115591},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n/* eslint-disable camelcase,import/no-extraneous-dependencies,jsx-a11y/no-static-element-interactions */\n\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport isFunction from 'lodash/isFunction';\nimport capitalize from 'lodash/capitalize';\nimport { event as d3_event, select as d3_select } from 'd3-selection';\nimport { axisBottom as d3_axis_bottom, axisLeft as d3_axis_left } from 'd3-axis';\nimport { scaleLinear as d3_scale_linear, scaleTime as d3_scale_time } from 'd3-scale';\nimport { timeYear as d3_time_year } from 'd3-time';\nimport { extent as d3_extent } from 'd3-array';\nimport { area as d3_area, line as d3_line } from 'd3-shape';\nimport { format as d3_format } from 'd3-format';\nimport { timeFormat as d3_timeFormat } from 'd3-time-format';\nimport { LINE_LABEL_HEIGHT } from '../../../constants';\nimport abbreviateNumber from '../../../utils/abbreviateNumber';\nimport { translateText } from '../../../utils/transifex';\nimport Responsive from '../../shared/responsive.hoc';\nimport './line.scss';\n\nvar Line =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Line, _Component);\n\n  function Line() {\n    _classCallCheck(this, Line);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Line).apply(this, arguments));\n  }\n\n  _createClass(Line, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.build();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.build();\n    }\n  }, {\n    key: \"getLines\",\n    value: function getLines() {\n      var lines = this.props.lines;\n      return lines.filter(function (lineData) {\n        return lineData.values.some(function (v) {\n          return v !== null;\n        });\n      });\n    }\n  }, {\n    key: \"isSmallChart\",\n    value: function isSmallChart() {\n      return this.props.width < 450;\n    }\n  }, {\n    key: \"getTicksStyle\",\n    value: function getTicksStyle() {\n      var width = this.props.width;\n\n      if (this.isSmallChart()) {\n        return 'small';\n      }\n\n      if (width <= 600) {\n        return 'medium';\n      }\n\n      return 'normal';\n    }\n  }, {\n    key: \"prepareData\",\n    value: function prepareData(xValues, data) {\n      return xValues.map(function (year, index) {\n        return {\n          name: data.name,\n          nodeId: data.node_id,\n          date: new Date(year, 0),\n          value: data.values[index],\n          value9: data.value9\n        };\n      });\n    }\n  }, {\n    key: \"build\",\n    value: function build() {\n      var _ref,\n          _this = this;\n\n      var _this$props = this.props,\n          unit = _this$props.unit,\n          lines = _this$props.lines,\n          style = _this$props.style,\n          testId = _this$props.testId,\n          xValues = _this$props.xValues,\n          onLinkClick = _this$props.onLinkClick,\n          year = _this$props.year,\n          contextId = _this$props.contextId,\n          profileType = _this$props.profileType,\n          margin = _this$props.margin,\n          ticks = _this$props.ticks,\n          settingsHeight = _this$props.settingsHeight,\n          lineClassNameCallback = _this$props.lineClassNameCallback,\n          showTooltipCallback = _this$props.showTooltipCallback,\n          hideTooltipCallback = _this$props.hideTooltipCallback;\n\n      var chartMargin = _objectSpread({}, margin);\n\n      var isSmallChart = this.isSmallChart();\n      var isTouchDevice = 'ontouchstart' in window; // I know this is not 100% true, but it's good enough\n\n      if (isSmallChart) {\n        chartMargin.right = 30;\n      }\n\n      var width = this.props.width - chartMargin.left - chartMargin.right;\n      var chartHeight = settingsHeight - chartMargin.top - chartMargin.bottom;\n\n      var allYValues = (_ref = []).concat.apply(_ref, _toConsumableArray(lines.map(function (line) {\n        return line.values;\n      })));\n\n      this.chart.innerHTML = '';\n      var d3Container = d3_select(this.chart).append('svg').attr('width', width + chartMargin.left + chartMargin.right).attr('height', chartHeight + chartMargin.top + chartMargin.bottom).style('overflow', 'visible').append('g').attr('transform', \"translate(\".concat(chartMargin.left, \",\").concat(chartMargin.top, \")\"));\n      var x = d3_scale_time().range([0, width]).domain(d3_extent(xValues, function (y) {\n        return new Date(y, 0);\n      }));\n      var y = d3_scale_linear().rangeRound([chartHeight, 0]).domain(d3_extent([0].concat(_toConsumableArray(allYValues))));\n      var lastY = chartHeight + LINE_LABEL_HEIGHT;\n      var sanitizedLines = this.getLines().sort(function (a, b) {\n        var last = xValues.length - 1;\n        return a.values[last] - b.values[last];\n      });\n      var numLines = sanitizedLines.length;\n      sanitizedLines.forEach(function (lineData, i) {\n        var lineValuesWithFormat = _this.prepareData(xValues, lineData);\n\n        var line = d3_line().defined(function (d) {\n          return d.value;\n        }).x(function (d) {\n          return x(d.date);\n        }).y(function (d) {\n          return y(d.value);\n        });\n        var type = typeof style !== 'undefined' ? style.type : lineData.type;\n        var lineStyle = typeof style !== 'undefined' ? style.style : lineData.style;\n        var area = null;\n        var pathContainers = null; // eslint-disable-next-line default-case\n\n        switch (type) {\n          case 'area':\n            area = d3_area().defined(function (d) {\n              return d.value;\n            }).x(function (d) {\n              return x(d.date);\n            }).y(chartHeight).y1(function (d) {\n              return y(d.value);\n            });\n            d3Container.append('path').datum(lineValuesWithFormat).attr('data-test', \"\".concat(testId, \"-area\")).attr('class', lineStyle).attr('d', area);\n            d3Container.append('path').datum(lineValuesWithFormat).attr('data-test', \"\".concat(testId, \"-area-line\")).attr('class', \"line-\".concat(lineStyle)).attr('d', line);\n            break;\n          // following styles don't care about discontinuous blocks for now and will only render the first one\n\n          case 'line':\n            d3Container.append('path').datum(lineValuesWithFormat).attr('data-test', \"\".concat(testId, \"-line\")).attr('class', lineStyle).attr('d', line);\n            break;\n\n          case 'line-points':\n            {\n              var lineNumber = numLines - i;\n              pathContainers = d3Container.datum(lineValuesWithFormat).append('g').attr('id', lineData.geo_id).attr('data-test', \"\".concat(testId, \"-line-points\")).attr('class', function (d) {\n                var lineIndex = isSmallChart ? i : d[0].value9;\n                return isFunction(lineClassNameCallback) ? lineClassNameCallback(lineIndex, lineStyle) : lineStyle;\n              });\n              pathContainers.selectAll('path').data(function (d) {\n                return [d];\n              }).enter().append('path').attr('d', line);\n\n              if (!isSmallChart) {\n                var texts = pathContainers.selectAll('text').data(function (d) {\n                  return [d];\n                }).enter().append('g').attr('transform', function (d) {\n                  var last = d.length - 1;\n                  var value = d[last].value;\n                  var newNumberY = y(value) + 4;\n\n                  if (newNumberY + LINE_LABEL_HEIGHT > lastY) {\n                    newNumberY = lastY - LINE_LABEL_HEIGHT - 1;\n                  }\n\n                  lastY = newNumberY;\n                  return \"translate(\".concat(width + 6, \",\").concat(newNumberY, \")\");\n                });\n                texts.append('text').text(\"\".concat(lineNumber, \".\"));\n                texts.append('text').attr('transform', 'translate(16,0)').attr('class', function (d) {\n                  if (typeof onLinkClick !== 'undefined' && d[0].nodeId && profileType) {\n                    return 'link';\n                  }\n\n                  return '';\n                }).on('click', function (d) {\n                  if (typeof onLinkClick !== 'undefined' && d[0].nodeId && profileType) {\n                    onLinkClick(profileType, {\n                      contextId: contextId,\n                      nodeId: d[0].nodeId,\n                      year: year\n                    });\n                  }\n                }).text(function (d) {\n                  return \"\".concat(capitalize(translateText(d[0].name)));\n                });\n              }\n\n              var circles = pathContainers.selectAll('circle').data(function (d) {\n                return d.filter(function (dd) {\n                  return dd.value !== null;\n                });\n              }).enter();\n              circles.append('circle').attr('class', 'small-circle').attr('cx', function (d) {\n                return x(d.date);\n              }).attr('cy', function (d) {\n                return y(d.value);\n              }).attr('r', 2);\n              circles.append('circle').attr('class', 'hover-circle').attr('cx', function (d) {\n                return x(d.date);\n              }).attr('cy', function (d) {\n                return y(d.value);\n              }).attr('r', 4);\n              _this.hitboxCircles = circles.append('circle').attr('class', 'hitbox-circle').attr('cx', function (d) {\n                return x(d.date);\n              }).attr('cy', function (d) {\n                return y(d.value);\n              }).attr('r', isTouchDevice ? 15 : 4);\n\n              if (showTooltipCallback !== undefined) {\n                _this.hitboxCircles.on('mousemove', function (d) {\n                  showTooltipCallback(d, d3_event.clientX + 10, d3_event.clientY + window.scrollY + 10);\n                }).on('mouseout', function () {\n                  hideTooltipCallback();\n                });\n              }\n\n              break;\n            }\n        }\n      });\n      var yTickFormat = null;\n      var xTickFormat = null;\n\n      if (ticks.yTickFormatType === 'top-location') {\n        yTickFormat = function yTickFormat(value) {\n          return abbreviateNumber(value, 3);\n        };\n\n        xTickFormat = function xTickFormat(value) {\n          var format = d3_timeFormat('%Y');\n          var formatValue = format(value);\n          return _this.getTicksStyle() === 'normal' ? formatValue : \"'\".concat(formatValue.toString().slice(2));\n        };\n      } else {\n        yTickFormat = function yTickFormat(value, idx, arr) {\n          var format = d3_format('0');\n          var isLast = idx === arr.length - 1;\n          return \"\".concat(format(value)).concat(isLast ? unit : '');\n        };\n\n        xTickFormat = function xTickFormat(value) {\n          var format = d3_timeFormat('%Y');\n          var formatValue = format(value);\n          return _this.getTicksStyle() === 'normal' ? formatValue : \"'\".concat(formatValue.toString().slice(2));\n        };\n      }\n\n      var xTicks = this.getTicksStyle() === 'small' ? d3_time_year.every(2) : xValues.length;\n      var xAxis = d3_axis_bottom(x).ticks(ticks.xTicks || xTicks).tickSize(0).tickPadding(ticks.xTickPadding).tickFormat(xTickFormat);\n      var yAxis = d3_axis_left(y).ticks(ticks.yTicks).tickSize(-width, 0).tickPadding(ticks.yTickPadding).tickFormat(yTickFormat);\n      d3Container.append('g').attr('transform', \"translate(0, \".concat(chartHeight, \" )\")).attr('class', 'axis axis--x').call(xAxis);\n      d3Container.append('g').attr('class', 'axis axis--y axis--deforestation').call(yAxis);\n    }\n  }, {\n    key: \"renderLegend\",\n    value: function renderLegend() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          xValues = _this$props2.xValues,\n          onLinkClick = _this$props2.onLinkClick,\n          year = _this$props2.year,\n          style = _this$props2.style,\n          lineClassNameCallback = _this$props2.lineClassNameCallback,\n          profileType = _this$props2.profileType,\n          contextId = _this$props2.contextId;\n      var isSmallChart = this.isSmallChart();\n      var lines = this.getLines().sort(function (a, b) {\n        var last = xValues.length - 1;\n        return b.values[last] - a.values[last];\n      });\n\n      var lineOnMouseEnter = function lineOnMouseEnter(lineData) {\n        _this2.chart.querySelector(\"#\".concat(lineData.geo_id)).classList.add('selected');\n      };\n\n      var lineOnMouseLeave = function lineOnMouseLeave(lineData) {\n        _this2.chart.querySelector(\"#\".concat(lineData.geo_id)).classList.remove('selected');\n      };\n\n      return React.createElement(\"ul\", {\n        className: \"line-bottom-legend\"\n      }, lines.map(function (lineData, index) {\n        var lineStyle = typeof style !== 'undefined' ? style.style : lineData.style;\n        var lineIndex = isSmallChart ? lines.length - index - 1 : lineData.value9;\n        var lineClassName = isFunction(lineClassNameCallback) ? lineClassNameCallback(lineIndex, lineStyle) : lineStyle;\n        var isLink = typeof onLinkClick !== 'undefined' && lineData.node_id && profileType;\n\n        var linkOnClick = function linkOnClick() {\n          onLinkClick(profileType, {\n            contextId: contextId,\n            nodeId: lineData.node_id,\n            year: year\n          });\n        };\n\n        return React.createElement(\"li\", {\n          key: index,\n          onMouseEnter: function onMouseEnter() {\n            return lineOnMouseEnter(lineData);\n          },\n          onMouseLeave: function onMouseLeave() {\n            return lineOnMouseLeave(lineData);\n          }\n        }, React.createElement(\"svg\", {\n          height: \"6\",\n          width: \"20\",\n          className: \"line-color\"\n        }, React.createElement(\"g\", {\n          className: lineClassName\n        }, React.createElement(\"path\", {\n          d: \"M0 3 20 3\"\n        }))), React.createElement(\"span\", null, index + 1, \".\"), isLink ? React.createElement(\"span\", {\n          className: \"link\",\n          onClick: linkOnClick\n        }, capitalize(translateText(lineData.name))) : React.createElement(\"span\", null, capitalize(translateText(lineData.name))));\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var testId = this.props.testId;\n      return React.createElement(\"div\", {\n        className: \"c-line\",\n        \"data-test\": testId\n      }, React.createElement(\"div\", {\n        ref: function ref(elem) {\n          _this3.chart = elem;\n        }\n      }), this.props.useBottomLegend && this.isSmallChart() && this.renderLegend());\n    }\n  }]);\n\n  return Line;\n}(Component);\n\nLine.propTypes = {\n  testId: PropTypes.string,\n  profileType: PropTypes.string,\n  lines: PropTypes.array,\n  unit: PropTypes.string,\n  style: PropTypes.object,\n  onLinkClick: PropTypes.func,\n  width: PropTypes.number,\n  contextId: PropTypes.number,\n  xValues: PropTypes.array,\n  useBottomLegend: PropTypes.bool,\n  year: PropTypes.number,\n  margin: PropTypes.object,\n  ticks: PropTypes.object,\n  settingsHeight: PropTypes.number,\n  lineClassNameCallback: PropTypes.func,\n  showTooltipCallback: PropTypes.func,\n  hideTooltipCallback: PropTypes.func\n};\n\nvar _default = Responsive()(Line);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_typeof, \"_typeof\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_toConsumableArray, \"_toConsumableArray\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_nonIterableSpread, \"_nonIterableSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_iterableToArray, \"_iterableToArray\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_arrayWithoutHoles, \"_arrayWithoutHoles\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_objectSpread, \"_objectSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_defineProperty, \"_defineProperty\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_classCallCheck, \"_classCallCheck\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_defineProperties, \"_defineProperties\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_createClass, \"_createClass\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_possibleConstructorReturn, \"_possibleConstructorReturn\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_assertThisInitialized, \"_assertThisInitialized\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_getPrototypeOf, \"_getPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_inherits, \"_inherits\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_setPrototypeOf, \"_setPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(Line, \"Line\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/line/line.component.jsx"],"names":["event","select","axisBottom","axisLeft","scaleLinear","scaleTime","timeYear","extent","area","line","format","timeFormat","Line","Component","lines","v","width","xValues","data","name","nodeId","date","value","value9","unit","style","testId","onLinkClick","year","contextId","profileType","margin","ticks","settingsHeight","lineClassNameCallback","showTooltipCallback","hideTooltipCallback","chartMargin","isSmallChart","isTouchDevice","chartHeight","allYValues","d3Container","d3_select","x","d3_extent","y","d3_scale_linear","lastY","sanitizedLines","last","a","b","numLines","lineValuesWithFormat","d","type","lineData","lineStyle","pathContainers","lineNumber","lineIndex","isFunction","texts","newNumberY","capitalize","translateText","circles","dd","d3_event","window","yTickFormat","xTickFormat","abbreviateNumber","d3_timeFormat","formatValue","d3_format","isLast","idx","arr","xTicks","d3_time_year","xAxis","d3_axis_bottom","yAxis","d3_axis_left","lineOnMouseEnter","lineOnMouseLeave","lineClassName","isLink","linkOnClick","index","PropTypes","useBottomLegend","func","Responsive"],"mappings":"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","sourcesContent":["/* eslint-disable camelcase,import/no-extraneous-dependencies,jsx-a11y/no-static-element-interactions */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport isFunction from 'lodash/isFunction';\nimport capitalize from 'lodash/capitalize';\nimport { event as d3_event, select as d3_select } from 'd3-selection';\nimport { axisBottom as d3_axis_bottom, axisLeft as d3_axis_left } from 'd3-axis';\nimport { scaleLinear as d3_scale_linear, scaleTime as d3_scale_time } from 'd3-scale';\nimport { timeYear as d3_time_year } from 'd3-time';\nimport { extent as d3_extent } from 'd3-array';\nimport { area as d3_area, line as d3_line } from 'd3-shape';\nimport { format as d3_format } from 'd3-format';\nimport { timeFormat as d3_timeFormat } from 'd3-time-format';\n\nimport { LINE_LABEL_HEIGHT } from '../../../constants';\nimport abbreviateNumber from '../../../utils/abbreviateNumber';\nimport { translateText } from '../../../utils/transifex';\nimport Responsive from '../../shared/responsive.hoc';\n\nimport './line.scss';\n\nclass Line extends Component {\n  componentDidMount() {\n    this.build();\n  }\n\n  componentDidUpdate() {\n    this.build();\n  }\n\n  getLines() {\n    const { lines } = this.props;\n    return lines.filter(lineData => lineData.values.some(v => v !== null));\n  }\n\n  isSmallChart() {\n    return this.props.width < 450;\n  }\n\n  getTicksStyle() {\n    const { width } = this.props;\n    if (this.isSmallChart()) {\n      return 'small';\n    }\n    if (width <= 600) {\n      return 'medium';\n    }\n\n    return 'normal';\n  }\n\n  prepareData(xValues, data) {\n    return xValues.map((year, index) => ({\n      name: data.name,\n      nodeId: data.node_id,\n      date: new Date(year, 0),\n      value: data.values[index],\n      value9: data.value9\n    }));\n  }\n\n  build() {\n    const {\n      unit,\n      lines,\n      style,\n      testId,\n      xValues,\n      onLinkClick,\n      year,\n      contextId,\n      profileType,\n      margin,\n      ticks,\n      settingsHeight,\n      lineClassNameCallback,\n      showTooltipCallback,\n      hideTooltipCallback\n    } = this.props;\n\n    const chartMargin = { ...margin };\n\n    const isSmallChart = this.isSmallChart();\n    const isTouchDevice = 'ontouchstart' in window; // I know this is not 100% true, but it's good enough\n\n    if (isSmallChart) {\n      chartMargin.right = 30;\n    }\n\n    const width = this.props.width - chartMargin.left - chartMargin.right;\n    const chartHeight = settingsHeight - chartMargin.top - chartMargin.bottom;\n    const allYValues = [].concat(...lines.map(line => line.values));\n\n    this.chart.innerHTML = '';\n    const d3Container = d3_select(this.chart)\n      .append('svg')\n      .attr('width', width + chartMargin.left + chartMargin.right)\n      .attr('height', chartHeight + chartMargin.top + chartMargin.bottom)\n      .style('overflow', 'visible')\n      .append('g')\n      .attr('transform', `translate(${chartMargin.left},${chartMargin.top})`);\n\n    const x = d3_scale_time()\n      .range([0, width])\n      .domain(d3_extent(xValues, y => new Date(y, 0)));\n\n    const y = d3_scale_linear()\n      .rangeRound([chartHeight, 0])\n      .domain(d3_extent([0, ...allYValues]));\n\n    let lastY = chartHeight + LINE_LABEL_HEIGHT;\n\n    const sanitizedLines = this.getLines().sort((a, b) => {\n      const last = xValues.length - 1;\n      return a.values[last] - b.values[last];\n    });\n    const numLines = sanitizedLines.length;\n\n    sanitizedLines.forEach((lineData, i) => {\n      const lineValuesWithFormat = this.prepareData(xValues, lineData);\n      const line = d3_line()\n        .defined(d => d.value)\n        .x(d => x(d.date))\n        .y(d => y(d.value));\n      const type = typeof style !== 'undefined' ? style.type : lineData.type;\n      const lineStyle = typeof style !== 'undefined' ? style.style : lineData.style;\n\n      let area = null;\n      let pathContainers = null;\n\n      // eslint-disable-next-line default-case\n      switch (type) {\n        case 'area':\n          area = d3_area()\n            .defined(d => d.value)\n            .x(d => x(d.date))\n            .y(chartHeight)\n            .y1(d => y(d.value));\n\n          d3Container\n            .append('path')\n            .datum(lineValuesWithFormat)\n            .attr('data-test', `${testId}-area`)\n            .attr('class', lineStyle)\n            .attr('d', area);\n\n          d3Container\n            .append('path')\n            .datum(lineValuesWithFormat)\n            .attr('data-test', `${testId}-area-line`)\n            .attr('class', `line-${lineStyle}`)\n            .attr('d', line);\n\n          break;\n\n        // following styles don't care about discontinuous blocks for now and will only render the first one\n        case 'line':\n          d3Container\n            .append('path')\n            .datum(lineValuesWithFormat)\n            .attr('data-test', `${testId}-line`)\n            .attr('class', lineStyle)\n            .attr('d', line);\n          break;\n\n        case 'line-points': {\n          const lineNumber = numLines - i;\n          pathContainers = d3Container\n            .datum(lineValuesWithFormat)\n            .append('g')\n            .attr('id', lineData.geo_id)\n            .attr('data-test', `${testId}-line-points`)\n            .attr('class', d => {\n              const lineIndex = isSmallChart ? i : d[0].value9;\n\n              return isFunction(lineClassNameCallback)\n                ? lineClassNameCallback(lineIndex, lineStyle)\n                : lineStyle;\n            });\n\n          pathContainers\n            .selectAll('path')\n            .data(d => [d])\n            .enter()\n            .append('path')\n            .attr('d', line);\n\n          if (!isSmallChart) {\n            const texts = pathContainers\n              .selectAll('text')\n              .data(d => [d])\n              .enter()\n              .append('g')\n              .attr('transform', d => {\n                const last = d.length - 1;\n                const { value } = d[last];\n                let newNumberY = y(value) + 4;\n                if (newNumberY + LINE_LABEL_HEIGHT > lastY) {\n                  newNumberY = lastY - LINE_LABEL_HEIGHT - 1;\n                }\n                lastY = newNumberY;\n                return `translate(${width + 6},${newNumberY})`;\n              });\n\n            texts.append('text').text(`${lineNumber}.`);\n\n            texts\n              .append('text')\n              .attr('transform', 'translate(16,0)')\n              .attr('class', d => {\n                if (typeof onLinkClick !== 'undefined' && d[0].nodeId && profileType) {\n                  return 'link';\n                }\n                return '';\n              })\n              .on('click', d => {\n                if (typeof onLinkClick !== 'undefined' && d[0].nodeId && profileType) {\n                  onLinkClick(profileType, {\n                    contextId,\n                    nodeId: d[0].nodeId,\n                    year\n                  });\n                }\n              })\n              .text(d => `${capitalize(translateText(d[0].name))}`);\n          }\n\n          const circles = pathContainers\n            .selectAll('circle')\n            .data(d => d.filter(dd => dd.value !== null))\n            .enter();\n\n          circles\n            .append('circle')\n            .attr('class', 'small-circle')\n            .attr('cx', d => x(d.date))\n            .attr('cy', d => y(d.value))\n            .attr('r', 2);\n\n          circles\n            .append('circle')\n            .attr('class', 'hover-circle')\n            .attr('cx', d => x(d.date))\n            .attr('cy', d => y(d.value))\n            .attr('r', 4);\n\n          this.hitboxCircles = circles\n            .append('circle')\n            .attr('class', 'hitbox-circle')\n            .attr('cx', d => x(d.date))\n            .attr('cy', d => y(d.value))\n            .attr('r', isTouchDevice ? 15 : 4);\n\n          if (showTooltipCallback !== undefined) {\n            this.hitboxCircles\n              .on('mousemove', d => {\n                showTooltipCallback(\n                  d,\n                  d3_event.clientX + 10,\n                  d3_event.clientY + window.scrollY + 10\n                );\n              })\n              .on('mouseout', () => {\n                hideTooltipCallback();\n              });\n          }\n          break;\n        }\n      }\n    });\n\n    let yTickFormat = null;\n    let xTickFormat = null;\n    if (ticks.yTickFormatType === 'top-location') {\n      yTickFormat = value => abbreviateNumber(value, 3);\n\n      xTickFormat = value => {\n        const format = d3_timeFormat('%Y');\n        const formatValue = format(value);\n        return this.getTicksStyle() === 'normal'\n          ? formatValue\n          : `'${formatValue.toString().slice(2)}`;\n      };\n    } else {\n      yTickFormat = (value, idx, arr) => {\n        const format = d3_format('0');\n        const isLast = idx === arr.length - 1;\n        return `${format(value)}${isLast ? unit : ''}`;\n      };\n      xTickFormat = value => {\n        const format = d3_timeFormat('%Y');\n        const formatValue = format(value);\n        return this.getTicksStyle() === 'normal'\n          ? formatValue\n          : `'${formatValue.toString().slice(2)}`;\n      };\n    }\n\n    const xTicks = this.getTicksStyle() === 'small' ? d3_time_year.every(2) : xValues.length;\n\n    const xAxis = d3_axis_bottom(x)\n      .ticks(ticks.xTicks || xTicks)\n      .tickSize(0)\n      .tickPadding(ticks.xTickPadding)\n      .tickFormat(xTickFormat);\n    const yAxis = d3_axis_left(y)\n      .ticks(ticks.yTicks)\n      .tickSize(-width, 0)\n      .tickPadding(ticks.yTickPadding)\n      .tickFormat(yTickFormat);\n\n    d3Container\n      .append('g')\n      .attr('transform', `translate(0, ${chartHeight} )`)\n      .attr('class', 'axis axis--x')\n      .call(xAxis);\n\n    d3Container\n      .append('g')\n      .attr('class', 'axis axis--y axis--deforestation')\n      .call(yAxis);\n  }\n\n  renderLegend() {\n    const {\n      xValues,\n      onLinkClick,\n      year,\n      style,\n      lineClassNameCallback,\n      profileType,\n      contextId\n    } = this.props;\n    const isSmallChart = this.isSmallChart();\n    const lines = this.getLines().sort((a, b) => {\n      const last = xValues.length - 1;\n      return b.values[last] - a.values[last];\n    });\n    const lineOnMouseEnter = lineData => {\n      this.chart.querySelector(`#${lineData.geo_id}`).classList.add('selected');\n    };\n    const lineOnMouseLeave = lineData => {\n      this.chart.querySelector(`#${lineData.geo_id}`).classList.remove('selected');\n    };\n\n    return (\n      <ul className=\"line-bottom-legend\">\n        {lines.map((lineData, index) => {\n          const lineStyle = typeof style !== 'undefined' ? style.style : lineData.style;\n          const lineIndex = isSmallChart ? lines.length - index - 1 : lineData.value9;\n          const lineClassName = isFunction(lineClassNameCallback)\n            ? lineClassNameCallback(lineIndex, lineStyle)\n            : lineStyle;\n          const isLink = typeof onLinkClick !== 'undefined' && lineData.node_id && profileType;\n          const linkOnClick = () => {\n            onLinkClick(profileType, {\n              contextId,\n              nodeId: lineData.node_id,\n              year\n            });\n          };\n\n          return (\n            <li\n              key={index}\n              onMouseEnter={() => lineOnMouseEnter(lineData)}\n              onMouseLeave={() => lineOnMouseLeave(lineData)}\n            >\n              <svg height=\"6\" width=\"20\" className=\"line-color\">\n                <g className={lineClassName}>\n                  <path d=\"M0 3 20 3\" />\n                </g>\n              </svg>\n              <span>{index + 1}.</span>\n              {isLink ? (\n                <span className=\"link\" onClick={linkOnClick}>\n                  {capitalize(translateText(lineData.name))}\n                </span>\n              ) : (\n                <span>{capitalize(translateText(lineData.name))}</span>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  render() {\n    const { testId } = this.props;\n    return (\n      <div className=\"c-line\" data-test={testId}>\n        <div\n          ref={elem => {\n            this.chart = elem;\n          }}\n        />\n        {this.props.useBottomLegend && this.isSmallChart() && this.renderLegend()}\n      </div>\n    );\n  }\n}\n\nLine.propTypes = {\n  testId: PropTypes.string,\n  profileType: PropTypes.string,\n  lines: PropTypes.array,\n  unit: PropTypes.string,\n  style: PropTypes.object,\n  onLinkClick: PropTypes.func,\n  width: PropTypes.number,\n  contextId: PropTypes.number,\n  xValues: PropTypes.array,\n  useBottomLegend: PropTypes.bool,\n  year: PropTypes.number,\n  margin: PropTypes.object,\n  ticks: PropTypes.object,\n  settingsHeight: PropTypes.number,\n  lineClassNameCallback: PropTypes.func,\n  showTooltipCallback: PropTypes.func,\n  hideTooltipCallback: PropTypes.func\n};\n\nexport default Responsive()(Line);\n"]}]}
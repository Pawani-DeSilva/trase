{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx","mtime":1548345115555},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getLogisticsMapLayers, getActiveLayers, getActiveParams } from 'react-components/logistics-map/logistics-map.selectors';\nimport { setLogisticsMapActiveModal, setLayerActive as setLayerActiveFn, getLogisticsMapCompanies } from 'react-components/logistics-map/logistics-map.actions';\nimport LogisticsMap from 'react-components/logistics-map/logistics-map.component';\nimport formatValue from 'utils/formatValue';\nimport startCase from 'lodash/startCase';\n\nvar LogisticsMapContainer =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(LogisticsMapContainer, _React$PureComponent);\n\n  function LogisticsMapContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LogisticsMapContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LogisticsMapContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      mapPopUp: null\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"bounds\", {\n      bbox: [-77.783203125, -35.46066995149529, -29.794921874999996, 9.709057068618208]\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"currentPopUp\", null);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onMouseOver\", function (e, layer) {\n      var data = e.data;\n      var commodity = _this.props.commodity;\n      if (!data) return;\n      var show = true;\n      var x = 0;\n      var y = 35;\n      var text = {\n        crushing_facilities: 'Crushing Facility',\n        refining_facilities: 'Refinery',\n        storage_facilities: 'Silo'\n      }[layer.name];\n      var items = [{\n        title: 'Company',\n        value: data.company\n      }, {\n        title: 'Municipality',\n        value: data.municipality\n      }];\n\n      if (commodity === 'soy') {\n        items.push({\n          title: \"Capacity (\".concat(commodity, \")\"),\n          value: formatValue(data.capacity, 'Trade volume'),\n          unit: 't'\n        });\n      } else {\n        items.splice(-1, 0, {\n          title: 'State',\n          value: data.state\n        });\n        items.push({\n          title: 'Subclass',\n          value: data.subclass\n        }, {\n          title: 'Inspection level',\n          value: data.inspection_level\n        });\n        text = startCase(layer.name);\n      }\n\n      var mapPopUp = _objectSpread({}, e, {\n        data: {\n          x: x,\n          y: y,\n          text: text,\n          show: show,\n          items: items\n        }\n      });\n\n      _this.setState(function () {\n        return {\n          mapPopUp: mapPopUp\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"buildEvents\", function (layer) {\n      return {\n        mouseover: function mouseover(e) {\n          return _this.onMouseOver(e, layer);\n        },\n        mouseout: function mouseout() {\n          return _this.popUp && _this.popUp.remove();\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getCurrentPopUp\", function (popUp) {\n      _this.popUp = popUp;\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"openCompaniesModal\", function () {\n      return _this.props.setLogisticsMapActiveModal('companies');\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"closeModal\", function () {\n      return _this.props.setLogisticsMapActiveModal(null);\n    });\n\n    return _this;\n  }\n\n  _createClass(LogisticsMapContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getLogisticsMapCompanies();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.commodity !== this.props.commodity) {\n        this.props.getLogisticsMapCompanies();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          activeLayers = _this$props.activeLayers,\n          layers = _this$props.layers,\n          setLayerActive = _this$props.setLayerActive,\n          commodity = _this$props.commodity,\n          tooltips = _this$props.tooltips,\n          activeModal = _this$props.activeModal;\n      var mapPopUp = this.state.mapPopUp;\n      return React.createElement(LogisticsMap, {\n        layers: layers,\n        tooltips: tooltips,\n        mapPopUp: mapPopUp,\n        bounds: this.bounds,\n        commodity: commodity,\n        activeModal: activeModal,\n        activeLayers: activeLayers,\n        closeModal: this.closeModal,\n        buildEvents: this.buildEvents,\n        setLayerActive: setLayerActive,\n        openModal: this.openCompaniesModal,\n        getCurrentPopUp: this.getCurrentPopUp\n      });\n    }\n  }]);\n\n  return LogisticsMapContainer;\n}(React.PureComponent);\n\n_defineProperty(LogisticsMapContainer, \"propTypes\", {\n  layers: PropTypes.array,\n  tooltips: PropTypes.object,\n  commodity: PropTypes.string,\n  activeLayers: PropTypes.array,\n  activeModal: PropTypes.string,\n  setLayerActive: PropTypes.func.isRequired,\n  getLogisticsMapCompanies: PropTypes.func.isRequired,\n  setLogisticsMapActiveModal: PropTypes.func.isRequired\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var _getActiveParams = getActiveParams(state),\n      activeYear = _getActiveParams.year,\n      commodity = _getActiveParams.commodity;\n\n  return {\n    commodity: commodity,\n    activeYear: activeYear,\n    activeLayers: getActiveLayers(state),\n    layers: getLogisticsMapLayers(state),\n    activeModal: state.logisticsMap.activeModal,\n    tooltips: state.app.tooltips ? state.app.tooltips.logisticsMap : {}\n  };\n};\n\nvar mapDispatchToProps = {\n  setLayerActive: setLayerActiveFn,\n  getLogisticsMapCompanies: getLogisticsMapCompanies,\n  setLogisticsMapActiveModal: setLogisticsMapActiveModal\n};\n\nvar _default = connect(mapStateToProps, mapDispatchToProps)(LogisticsMapContainer);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_typeof, \"_typeof\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_objectSpread, \"_objectSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_classCallCheck, \"_classCallCheck\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_defineProperties, \"_defineProperties\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_createClass, \"_createClass\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_possibleConstructorReturn, \"_possibleConstructorReturn\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_getPrototypeOf, \"_getPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_inherits, \"_inherits\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_setPrototypeOf, \"_setPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_assertThisInitialized, \"_assertThisInitialized\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_defineProperty, \"_defineProperty\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(LogisticsMapContainer, \"LogisticsMapContainer\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/logistics-map/logistics-map.container.jsx"],"names":["setLayerActive","LogisticsMapContainer","React","PureComponent","layers","PropTypes","tooltips","commodity","activeLayers","activeModal","getLogisticsMapCompanies","setLogisticsMapActiveModal","isRequired","mapPopUp","bbox","prevProps","data","e","show","x","y","text","crushing_facilities","refining_facilities","storage_facilities","layer","items","title","value","company","municipality","formatValue","unit","state","subclass","inspection_level","startCase","mouseover","mouseout","getCurrentPopUp","mapStateToProps","activeYear","getActiveParams","getActiveLayers","getLogisticsMapLayers","mapDispatchToProps","connect"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n  getLogisticsMapLayers,\n  getActiveLayers,\n  getActiveParams\n} from 'react-components/logistics-map/logistics-map.selectors';\nimport {\n  setLogisticsMapActiveModal,\n  setLayerActive as setLayerActiveFn,\n  getLogisticsMapCompanies\n} from 'react-components/logistics-map/logistics-map.actions';\nimport LogisticsMap from 'react-components/logistics-map/logistics-map.component';\nimport formatValue from 'utils/formatValue';\nimport startCase from 'lodash/startCase';\n\nclass LogisticsMapContainer extends React.PureComponent {\n  static propTypes = {\n    layers: PropTypes.array,\n    tooltips: PropTypes.object,\n    commodity: PropTypes.string,\n    activeLayers: PropTypes.array,\n    activeModal: PropTypes.string,\n    setLayerActive: PropTypes.func.isRequired,\n    getLogisticsMapCompanies: PropTypes.func.isRequired,\n    setLogisticsMapActiveModal: PropTypes.func.isRequired\n  };\n\n  state = {\n    mapPopUp: null\n  };\n\n  bounds = {\n    bbox: [-77.783203125, -35.46066995149529, -29.794921874999996, 9.709057068618208]\n  };\n\n  currentPopUp = null;\n\n  componentDidMount() {\n    this.props.getLogisticsMapCompanies();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.commodity !== this.props.commodity) {\n      this.props.getLogisticsMapCompanies();\n    }\n  }\n\n  onMouseOver = (e, layer) => {\n    const { data } = e;\n    const { commodity } = this.props;\n    if (!data) return;\n    const show = true;\n    const x = 0;\n    const y = 35;\n    let text = {\n      crushing_facilities: 'Crushing Facility',\n      refining_facilities: 'Refinery',\n      storage_facilities: 'Silo'\n    }[layer.name];\n    const items = [\n      { title: 'Company', value: data.company },\n      { title: 'Municipality', value: data.municipality }\n    ];\n    if (commodity === 'soy') {\n      items.push({\n        title: `Capacity (${commodity})`,\n        value: formatValue(data.capacity, 'Trade volume'),\n        unit: 't'\n      });\n    } else {\n      items.splice(-1, 0, { title: 'State', value: data.state });\n      items.push(\n        { title: 'Subclass', value: data.subclass },\n        { title: 'Inspection level', value: data.inspection_level }\n      );\n      text = startCase(layer.name);\n    }\n    const mapPopUp = { ...e, data: { x, y, text, show, items } };\n    this.setState(() => ({ mapPopUp }));\n  };\n\n  buildEvents = layer => ({\n    mouseover: e => this.onMouseOver(e, layer),\n    mouseout: () => this.popUp && this.popUp.remove()\n  });\n\n  getCurrentPopUp = popUp => {\n    this.popUp = popUp;\n  };\n\n  openCompaniesModal = () => this.props.setLogisticsMapActiveModal('companies');\n\n  closeModal = () => this.props.setLogisticsMapActiveModal(null);\n\n  render() {\n    const { activeLayers, layers, setLayerActive, commodity, tooltips, activeModal } = this.props;\n    const { mapPopUp } = this.state;\n\n    return (\n      <LogisticsMap\n        layers={layers}\n        tooltips={tooltips}\n        mapPopUp={mapPopUp}\n        bounds={this.bounds}\n        commodity={commodity}\n        activeModal={activeModal}\n        activeLayers={activeLayers}\n        closeModal={this.closeModal}\n        buildEvents={this.buildEvents}\n        setLayerActive={setLayerActive}\n        openModal={this.openCompaniesModal}\n        getCurrentPopUp={this.getCurrentPopUp}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const { year: activeYear, commodity } = getActiveParams(state);\n  return {\n    commodity,\n    activeYear,\n    activeLayers: getActiveLayers(state),\n    layers: getLogisticsMapLayers(state),\n    activeModal: state.logisticsMap.activeModal,\n    tooltips: state.app.tooltips ? state.app.tooltips.logisticsMap : {}\n  };\n};\n\nconst mapDispatchToProps = {\n  setLayerActive: setLayerActiveFn,\n  getLogisticsMapCompanies,\n  setLogisticsMapActiveModal\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LogisticsMapContainer);\n"]}]}
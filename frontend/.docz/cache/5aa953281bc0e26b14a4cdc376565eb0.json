{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js","mtime":1543486759488},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nimport isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport GA_TOOL_EVENTS from './tool.events';\nimport GA_DATA_EVENTS from './data.events';\nimport GA_ROUTER_EVENTS from './router.events';\n\nvar GA_EVENT_WHITELIST = _toConsumableArray(GA_TOOL_EVENTS).concat(_toConsumableArray(GA_DATA_EVENTS), _toConsumableArray(GA_ROUTER_EVENTS));\n\nvar TRACK_WITH_QUERY = ['profileNode'];\n\nfunction createGAEvent(event, action, state) {\n  if (event.hitType === 'pageview') {\n    var prevPath = get(action, 'meta.location.prev.pathname');\n    var currPath = get(action, 'meta.location.current.pathname');\n\n    if (TRACK_WITH_QUERY.includes(action.type)) {\n      prevPath += \"?\".concat(get(action, 'meta.location.prev.search'));\n      currPath += \"?\".concat(get(action, 'meta.location.current.search'));\n    } // do not track redirects to the same page\n\n\n    if (prevPath === currPath) return null;\n    return {\n      hitType: 'pageview',\n      page: currPath\n    };\n  }\n\n  return {\n    hitType: 'event',\n    eventCategory: event.category,\n    eventAction: isFunction(event.action) ? event.action(action, state) : event.action,\n    eventLabel: event.getPayload ? event.getPayload(action, state) : undefined\n  };\n}\n\nvar googleAnalyticsMiddleware = function googleAnalyticsMiddleware(store) {\n  return function (next) {\n    return function (action) {\n      if (typeof window.ga !== 'undefined') {\n        var state = store.getState();\n        var event = GA_EVENT_WHITELIST.find(function (whitelistEvent) {\n          return action.type === whitelistEvent.type;\n        });\n\n        if (event) {\n          var gaEvent = createGAEvent(event, action, state);\n\n          if (gaEvent) {\n            window.ga('send', gaEvent);\n          }\n        }\n      }\n\n      return next(action);\n    };\n  };\n};\n\nvar _default = googleAnalyticsMiddleware;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_toConsumableArray, \"_toConsumableArray\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  reactHotLoader.register(_nonIterableSpread, \"_nonIterableSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  reactHotLoader.register(_iterableToArray, \"_iterableToArray\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  reactHotLoader.register(_arrayWithoutHoles, \"_arrayWithoutHoles\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  reactHotLoader.register(GA_EVENT_WHITELIST, \"GA_EVENT_WHITELIST\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  reactHotLoader.register(TRACK_WITH_QUERY, \"TRACK_WITH_QUERY\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  reactHotLoader.register(createGAEvent, \"createGAEvent\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  reactHotLoader.register(googleAnalyticsMiddleware, \"googleAnalyticsMiddleware\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/middleware.js"],"names":["GA_EVENT_WHITELIST","TRACK_WITH_QUERY","event","prevPath","get","currPath","action","hitType","page","eventCategory","eventAction","isFunction","eventLabel","undefined","googleAnalyticsMiddleware","window","state","store","whitelistEvent","gaEvent","createGAEvent","next"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAA,UAAA,MAAA,mBAAA;AACA,OAAA,GAAA,MAAA,YAAA;AACA,OAAA,cAAA,MAAA,eAAA;AACA,OAAA,cAAA,MAAA,eAAA;AACA,OAAA,gBAAA,MAAA,iBAAA;;AAEA,IAAMA,kBAAkB,GAAA,kBAAA,CAAA,cAAA,CAAA,CAAA,MAAA,CAAA,kBAAA,CAAA,cAAA,CAAA,EAAA,kBAAA,CAAxB,gBAAwB,CAAA,CAAxB;;AACA,IAAMC,gBAAgB,GAAG,CAAzB,aAAyB,CAAzB;;AAEA,SAAA,aAAA,CAAA,KAAA,EAAA,MAAA,EAAA,KAAA,EAA6C;AAC3C,MAAIC,KAAK,CAALA,OAAAA,KAAJ,UAAA,EAAkC;AAChC,QAAIC,QAAQ,GAAGC,GAAG,CAAA,MAAA,EAAlB,6BAAkB,CAAlB;AACA,QAAIC,QAAQ,GAAGD,GAAG,CAAA,MAAA,EAAlB,gCAAkB,CAAlB;;AAEA,QAAIH,gBAAgB,CAAhBA,QAAAA,CAA0BK,MAAM,CAApC,IAAIL,CAAJ,EAA4C;AAC1CE,MAAAA,QAAQ,IAAA,IAAA,MAAA,CAAQC,GAAG,CAAA,MAAA,EAAnBD,2BAAmB,CAAX,CAARA;AACAE,MAAAA,QAAQ,IAAA,IAAA,MAAA,CAAQD,GAAG,CAAA,MAAA,EAAnBC,8BAAmB,CAAX,CAARA;AAN8B,KAAA,CAShC;;;AACA,QAAIF,QAAQ,KAAZ,QAAA,EAA2B,OAAA,IAAA;AAE3B,WAAO;AACLI,MAAAA,OAAO,EADF,UAAA;AAELC,MAAAA,IAAI,EAAEH;AAFD,KAAP;AAID;;AAED,SAAO;AACLE,IAAAA,OAAO,EADF,OAAA;AAELE,IAAAA,aAAa,EAAEP,KAAK,CAFf,QAAA;AAGLQ,IAAAA,WAAW,EAAEC,UAAU,CAACT,KAAK,CAAhBS,MAAU,CAAVA,GAA2BT,KAAK,CAALA,MAAAA,CAAAA,MAAAA,EAA3BS,KAA2BT,CAA3BS,GAAyDT,KAAK,CAHtE,MAAA;AAILU,IAAAA,UAAU,EAAEV,KAAK,CAALA,UAAAA,GAAmBA,KAAK,CAALA,UAAAA,CAAAA,MAAAA,EAAnBA,KAAmBA,CAAnBA,GAAqDW;AAJ5D,GAAP;AAMD;;AAED,IAAMC,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAA,KAAA,EAAK;AAAA,SAAI,UAAA,IAAA,EAAI;AAAA,WAAI,UAAA,MAAA,EAAU;AAC3D,UAAI,OAAOC,MAAM,CAAb,EAAA,KAAJ,WAAA,EAAsC;AACpC,YAAMC,KAAK,GAAGC,KAAK,CAAnB,QAAcA,EAAd;AACA,YAAMf,KAAK,GAAG,kBAAkB,CAAlB,IAAA,CAAwB,UAAA,cAAA,EAAc;AAAA,iBAAII,MAAM,CAANA,IAAAA,KAAgBY,cAAc,CAAlC,IAAA;AAApD,SAAc,CAAd;;AAEA,YAAA,KAAA,EAAW;AACT,cAAMC,OAAO,GAAGC,aAAa,CAAA,KAAA,EAAA,MAAA,EAA7B,KAA6B,CAA7B;;AAEA,cAAA,OAAA,EAAa;AACXL,YAAAA,MAAM,CAANA,EAAAA,CAAAA,MAAAA,EAAAA,OAAAA;AACD;AACF;AACF;;AAED,aAAOM,IAAI,CAAX,MAAW,CAAX;AAd6C,KAAA;AAAR,GAAA;AAAvC,CAAA;;eAiBA,yB;AAAA;;;;;;;;;;;;;;;;0BA/CMrB,kB;0BACAC,gB;0BAEN,a;0BA2BMa,yB","sourcesContent":["import isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport GA_TOOL_EVENTS from './tool.events';\nimport GA_DATA_EVENTS from './data.events';\nimport GA_ROUTER_EVENTS from './router.events';\n\nconst GA_EVENT_WHITELIST = [...GA_TOOL_EVENTS, ...GA_DATA_EVENTS, ...GA_ROUTER_EVENTS];\nconst TRACK_WITH_QUERY = ['profileNode'];\n\nfunction createGAEvent(event, action, state) {\n  if (event.hitType === 'pageview') {\n    let prevPath = get(action, 'meta.location.prev.pathname');\n    let currPath = get(action, 'meta.location.current.pathname');\n\n    if (TRACK_WITH_QUERY.includes(action.type)) {\n      prevPath += `?${get(action, 'meta.location.prev.search')}`;\n      currPath += `?${get(action, 'meta.location.current.search')}`;\n    }\n\n    // do not track redirects to the same page\n    if (prevPath === currPath) return null;\n\n    return {\n      hitType: 'pageview',\n      page: currPath\n    };\n  }\n\n  return {\n    hitType: 'event',\n    eventCategory: event.category,\n    eventAction: isFunction(event.action) ? event.action(action, state) : event.action,\n    eventLabel: event.getPayload ? event.getPayload(action, state) : undefined\n  };\n}\n\nconst googleAnalyticsMiddleware = store => next => action => {\n  if (typeof window.ga !== 'undefined') {\n    const state = store.getState();\n    const event = GA_EVENT_WHITELIST.find(whitelistEvent => action.type === whitelistEvent.type);\n\n    if (event) {\n      const gaEvent = createGAEvent(event, action, state);\n\n      if (gaEvent) {\n        window.ga('send', gaEvent);\n      }\n    }\n  }\n\n  return next(action);\n};\n\nexport default googleAnalyticsMiddleware;\n"]}]}
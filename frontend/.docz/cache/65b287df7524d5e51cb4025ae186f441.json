{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/data.events.js","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/data.events.js","mtime":1543486759488},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport { GA_TRACK_DOWNLOAD_FILE_TYPE, GA_TRACK_DOWNLOAD_FILTERS, GA_TRACK_DOWNLOAD_FORM_LOADED, GA_TRACK_DOWNLOAD_OUTPUT_TYPE } from './analytics.actions';\nvar _default = [{\n  type: GA_TRACK_DOWNLOAD_FILTERS,\n  category: 'Download',\n  action: function action(_action) {\n    return \"Download \".concat(_action.payload.type, \" data\");\n  },\n  getPayload: function getPayload(action, state) {\n    var context = state.app.contexts.find(function (elem) {\n      return elem.id === parseInt(action.payload.context_id, 10);\n    });\n    var payload = Object.assign({}, {\n      country: context.countryName,\n      commodity: context.commodityName\n    }, action.payload);\n\n    if (payload.c_ids) {\n      payload.consumptionCountries = payload.c_ids.map(function (countryId) {\n        return state.data.consumptionCountries.find(function (elem) {\n          return elem.id === parseInt(countryId, 10);\n        }).name;\n      });\n    }\n\n    if (payload.e_ids) {\n      payload.exporters = payload.e_ids.map(function (exportersId) {\n        return state.data.exporters.find(function (elem) {\n          return elem.id === parseInt(exportersId, 10);\n        }).name;\n      });\n    } // TODO: apply filters values?\n\n\n    if (payload.filters) {\n      payload.filters = payload.filters.map(function (filter) {\n        return state.data.indicators.find(function (elem) {\n          return elem.name === filter.name;\n        }).frontendName;\n      });\n    }\n\n    delete payload.c_ids;\n    delete payload.e_ids;\n    delete payload.context_id;\n    delete payload.file;\n    delete payload.type;\n    delete payload.table;\n    delete payload.separator;\n    var payloadStringComponents = [];\n    Object.keys(payload).forEach(function (key) {\n      var value = payload[key];\n\n      if (value && value instanceof Array && value.length) {\n        payloadStringComponents.push(\"\".concat(key, \"=\").concat(value.join(',')));\n      } else {\n        payloadStringComponents.push(\"\".concat(key, \"=\").concat(value));\n      }\n    });\n    return payloadStringComponents.join(';');\n  }\n}, {\n  type: GA_TRACK_DOWNLOAD_FORM_LOADED,\n  category: 'Download',\n  action: 'Download form loaded',\n  getPayload: function getPayload(action) {\n    return action.payload;\n  }\n}, {\n  type: GA_TRACK_DOWNLOAD_OUTPUT_TYPE,\n  category: 'Download',\n  action: 'Download Output Type',\n  getPayload: function getPayload(action) {\n    return action.payload;\n  }\n}, {\n  type: GA_TRACK_DOWNLOAD_FILE_TYPE,\n  category: 'Download',\n  action: 'Download File Type',\n  getPayload: function getPayload(action) {\n    return action.payload;\n  }\n}];\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/data.events.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/analytics/data.events.js"],"names":["type","category","action","getPayload","context","elem","parseInt","payload","country","commodity","commodityName","filter","payloadStringComponents","Object","value"],"mappings":"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","sourcesContent":["import {\n  GA_TRACK_DOWNLOAD_FILE_TYPE,\n  GA_TRACK_DOWNLOAD_FILTERS,\n  GA_TRACK_DOWNLOAD_FORM_LOADED,\n  GA_TRACK_DOWNLOAD_OUTPUT_TYPE\n} from './analytics.actions';\n\nexport default [\n  {\n    type: GA_TRACK_DOWNLOAD_FILTERS,\n    category: 'Download',\n    action: action => `Download ${action.payload.type} data`,\n    getPayload: (action, state) => {\n      const context = state.app.contexts.find(\n        elem => elem.id === parseInt(action.payload.context_id, 10)\n      );\n      const payload = Object.assign(\n        {},\n        {\n          country: context.countryName,\n          commodity: context.commodityName\n        },\n        action.payload\n      );\n      if (payload.c_ids) {\n        payload.consumptionCountries = payload.c_ids.map(\n          countryId =>\n            state.data.consumptionCountries.find(elem => elem.id === parseInt(countryId, 10)).name\n        );\n      }\n      if (payload.e_ids) {\n        payload.exporters = payload.e_ids.map(\n          exportersId =>\n            state.data.exporters.find(elem => elem.id === parseInt(exportersId, 10)).name\n        );\n      }\n      // TODO: apply filters values?\n      if (payload.filters) {\n        payload.filters = payload.filters.map(\n          filter => state.data.indicators.find(elem => elem.name === filter.name).frontendName\n        );\n      }\n\n      delete payload.c_ids;\n      delete payload.e_ids;\n      delete payload.context_id;\n      delete payload.file;\n      delete payload.type;\n      delete payload.table;\n      delete payload.separator;\n\n      const payloadStringComponents = [];\n\n      Object.keys(payload).forEach(key => {\n        const value = payload[key];\n        if (value && value instanceof Array && value.length) {\n          payloadStringComponents.push(`${key}=${value.join(',')}`);\n        } else {\n          payloadStringComponents.push(`${key}=${value}`);\n        }\n      });\n\n      return payloadStringComponents.join(';');\n    }\n  },\n  {\n    type: GA_TRACK_DOWNLOAD_FORM_LOADED,\n    category: 'Download',\n    action: 'Download form loaded',\n    getPayload: action => action.payload\n  },\n  {\n    type: GA_TRACK_DOWNLOAD_OUTPUT_TYPE,\n    category: 'Download',\n    action: 'Download Output Type',\n    getPayload: action => action.payload\n  },\n  {\n    type: GA_TRACK_DOWNLOAD_FILE_TYPE,\n    category: 'Download',\n    action: 'Download File Type',\n    getPayload: action => action.payload\n  }\n];\n"]}]}
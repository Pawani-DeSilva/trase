{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js","mtime":1548840716947},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport isEmpty from 'lodash/isEmpty';\nimport { GET_DISCLAIMER_URL, GET_SITE_DIVE_URL, GET_NODES_WITH_SEARCH_URL, getURLFromParams } from 'utils/getURLFromParams';\nimport { TOGGLE_MAP, loadToolDataForCurrentContext, SELECT_YEARS, loadNodes, loadLinks } from 'scripts/actions/tool.actions';\nimport { getContextById } from 'scripts/reducers/helpers/contextHelper';\nimport getPageTitle from 'scripts/router/page-title';\nimport { redirect } from 'redux-first-router';\nexport var LOAD_STATE_FROM_URL = 'LOAD_STATE_FROM_URL';\nexport var LOAD_INITIAL_CONTEXT = 'LOAD_INITIAL_CONTEXT';\nexport var SET_CONTEXT = 'SET_CONTEXT';\nexport var DISPLAY_STORY_MODAL = 'DISPLAY_STORY_MODAL';\nexport var LOAD_TOOLTIP = 'LOAD_TOOLTIP';\nexport var SET_SANKEY_SIZE = 'SET_SANKEY_SIZE';\nexport var SET_TOOLTIPS = 'SET_TOOLTIPS';\nexport var SHOW_DISCLAIMER = 'SHOW_DISCLAIMER';\nexport var TOGGLE_DROPDOWN = 'TOGGLE_DROPDOWN';\nexport var TOGGLE_MAP_LAYERS_MENU = 'TOGGLE_MAP_LAYERS_MENU';\nexport var CLOSE_STORY_MODAL = 'CLOSE_STORY_MODAL';\nexport var SET_SEARCH_TERM = 'SET_SEARCH_TERM';\nexport var LOAD_SEARCH_RESULTS = 'LOAD_SEARCH_RESULTS';\nexport var SET_CONTEXTS = 'SET_CONTEXTS';\nexport var SET_CONTEXT_IS_USER_SELECTED = 'SET_CONTEXT_IS_USER_SELECTED';\nexport var APP__SET_LOADING = 'APP__SET_LOADING';\nexport function selectInitialContextById(contextId) {\n  return function (dispatch, getState) {\n    var selectedContext = getContextById(getState(), contextId);\n    dispatch({\n      type: LOAD_INITIAL_CONTEXT,\n      payload: selectedContext\n    });\n    document.title = getPageTitle(getState());\n  };\n}\nexport function setContextIsUserSelected(contextIsUserSelected) {\n  return {\n    type: SET_CONTEXT_IS_USER_SELECTED,\n    payload: contextIsUserSelected\n  };\n}\nexport function selectContextById(contextId) {\n  return function (dispatch, getState) {\n    var selectedContext = getContextById(getState(), contextId);\n    dispatch({\n      type: SET_CONTEXT,\n      payload: selectedContext\n    });\n    dispatch(setContextIsUserSelected(true));\n\n    if (getState().location.type === 'tool') {\n      dispatch(loadToolDataForCurrentContext());\n    }\n\n    document.title = getPageTitle(getState());\n  };\n}\nexport function resize() {\n  return {\n    type: SET_SANKEY_SIZE\n  };\n}\nexport function toggleMap() {\n  var forceState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  return function (dispatch) {\n    dispatch({\n      type: TOGGLE_MAP,\n      forceState: forceState\n    });\n    dispatch({\n      type: SET_SANKEY_SIZE\n    });\n  };\n}\nexport function toggleMapLayerMenu() {\n  return function (dispatch) {\n    dispatch({\n      type: TOGGLE_MAP_LAYERS_MENU\n    });\n    dispatch({\n      type: SET_SANKEY_SIZE\n    });\n  };\n}\nexport function loadTooltip() {\n  return {\n    type: LOAD_TOOLTIP\n  };\n}\nexport function closeStoryModal() {\n  return {\n    type: CLOSE_STORY_MODAL\n  };\n}\nexport function loadDisclaimer() {\n  return function (dispatch) {\n    var disclaimerLocal = localStorage.getItem('disclaimerVersion');\n    var url = getURLFromParams(GET_DISCLAIMER_URL);\n    fetch(url).then(function (resp) {\n      return resp.text();\n    }).then(function (resp) {\n      return JSON.parse(resp);\n    }).then(function (disclaimer) {\n      if (disclaimerLocal !== null && parseInt(disclaimerLocal, 10) >= disclaimer.version) {\n        return;\n      }\n\n      localStorage.setItem('disclaimerVersion', disclaimer.version);\n      dispatch({\n        type: SHOW_DISCLAIMER,\n        disclaimerContent: disclaimer.content\n      });\n    });\n  };\n}\nexport function toggleDropdown(dropdownId) {\n  return {\n    type: TOGGLE_DROPDOWN,\n    dropdownId: dropdownId\n  };\n}\nexport function displayStoryModal(storyId) {\n  return function (dispatch) {\n    fetch(\"\".concat(getURLFromParams(GET_SITE_DIVE_URL), \"/\").concat(storyId)).then(function (resp) {\n      if (resp.ok) return resp.text();\n      throw new Error(resp.statusText);\n    }).then(function (resp) {\n      return JSON.parse(resp);\n    }).then(function (_ref) {\n      var data = _ref.data;\n      return dispatch({\n        type: DISPLAY_STORY_MODAL,\n        payload: {\n          visibility: true,\n          modalParams: data\n        }\n      });\n    }).catch(function (err) {\n      console.error('Error loading site dive.', err);\n    });\n  };\n}\nexport function resetSearchResults() {\n  return {\n    type: SET_SEARCH_TERM,\n    payload: {\n      term: '',\n      results: []\n    }\n  };\n}\nexport var setLanguage = function setLanguage(lang) {\n  return function (dispatch, getState) {\n    var _getState = getState(),\n        location = _getState.location;\n\n    var query = _objectSpread({}, location.query, {\n      lang: lang\n    });\n\n    var payload = _objectSpread({}, location.payload, {\n      query: query\n    });\n\n    return dispatch(redirect({\n      type: location.type,\n      payload: payload\n    }));\n  };\n};\nexport function loadSearchResults(searchTerm) {\n  return function (dispatch) {\n    var url = \"\".concat(getURLFromParams(GET_NODES_WITH_SEARCH_URL), \"?query=\").concat(searchTerm);\n\n    if (isEmpty(searchTerm)) {\n      dispatch(resetSearchResults());\n      return;\n    }\n\n    dispatch({\n      type: SET_SEARCH_TERM,\n      payload: {\n        term: searchTerm,\n        isLoading: true\n      }\n    });\n    fetch(url).then(function (resp) {\n      return resp.json();\n    }).then(function (results) {\n      dispatch({\n        type: LOAD_SEARCH_RESULTS,\n        payload: {\n          term: searchTerm,\n          results: results.data\n        }\n      });\n    }).catch(function () {\n      dispatch({\n        type: LOAD_SEARCH_RESULTS,\n        payload: {\n          term: searchTerm,\n          results: []\n        }\n      });\n    });\n  };\n}\nexport function selectYears(years) {\n  return function (dispatch, getState) {\n    var _getState2 = getState(),\n        location = _getState2.location;\n\n    dispatch({\n      type: SELECT_YEARS,\n      years: years\n    });\n\n    if (location.type === 'tool') {\n      dispatch(loadNodes());\n      dispatch(loadLinks());\n    }\n  };\n}\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_objectSpread, \"_objectSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(_defineProperty, \"_defineProperty\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(LOAD_STATE_FROM_URL, \"LOAD_STATE_FROM_URL\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(LOAD_INITIAL_CONTEXT, \"LOAD_INITIAL_CONTEXT\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(SET_CONTEXT, \"SET_CONTEXT\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(DISPLAY_STORY_MODAL, \"DISPLAY_STORY_MODAL\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(LOAD_TOOLTIP, \"LOAD_TOOLTIP\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(SET_SANKEY_SIZE, \"SET_SANKEY_SIZE\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(SET_TOOLTIPS, \"SET_TOOLTIPS\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(SHOW_DISCLAIMER, \"SHOW_DISCLAIMER\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(TOGGLE_DROPDOWN, \"TOGGLE_DROPDOWN\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(TOGGLE_MAP_LAYERS_MENU, \"TOGGLE_MAP_LAYERS_MENU\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(CLOSE_STORY_MODAL, \"CLOSE_STORY_MODAL\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(SET_SEARCH_TERM, \"SET_SEARCH_TERM\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(LOAD_SEARCH_RESULTS, \"LOAD_SEARCH_RESULTS\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(SET_CONTEXTS, \"SET_CONTEXTS\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(SET_CONTEXT_IS_USER_SELECTED, \"SET_CONTEXT_IS_USER_SELECTED\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(APP__SET_LOADING, \"APP__SET_LOADING\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(selectInitialContextById, \"selectInitialContextById\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(setContextIsUserSelected, \"setContextIsUserSelected\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(selectContextById, \"selectContextById\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(resize, \"resize\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(toggleMap, \"toggleMap\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(toggleMapLayerMenu, \"toggleMapLayerMenu\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(loadTooltip, \"loadTooltip\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(closeStoryModal, \"closeStoryModal\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(loadDisclaimer, \"loadDisclaimer\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(toggleDropdown, \"toggleDropdown\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(displayStoryModal, \"displayStoryModal\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(resetSearchResults, \"resetSearchResults\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(setLanguage, \"setLanguage\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(loadSearchResults, \"loadSearchResults\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  reactHotLoader.register(selectYears, \"selectYears\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/actions/app.actions.js"],"names":["LOAD_STATE_FROM_URL","LOAD_INITIAL_CONTEXT","SET_CONTEXT","DISPLAY_STORY_MODAL","LOAD_TOOLTIP","SET_SANKEY_SIZE","SET_TOOLTIPS","SHOW_DISCLAIMER","TOGGLE_DROPDOWN","TOGGLE_MAP_LAYERS_MENU","CLOSE_STORY_MODAL","SET_SEARCH_TERM","LOAD_SEARCH_RESULTS","SET_CONTEXTS","SET_CONTEXT_IS_USER_SELECTED","APP__SET_LOADING","selectedContext","getContextById","getState","dispatch","type","payload","document","getPageTitle","contextIsUserSelected","setContextIsUserSelected","loadToolDataForCurrentContext","forceState","disclaimerLocal","localStorage","url","getURLFromParams","fetch","resp","JSON","parseInt","disclaimer","disclaimerContent","content","dropdownId","data","visibility","modalParams","console","term","results","setLanguage","location","query","lang","redirect","isEmpty","resetSearchResults","isLoading","years","loadNodes","loadLinks"],"mappings":"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","sourcesContent":["import isEmpty from 'lodash/isEmpty';\nimport {\n  GET_DISCLAIMER_URL,\n  GET_SITE_DIVE_URL,\n  GET_NODES_WITH_SEARCH_URL,\n  getURLFromParams\n} from 'utils/getURLFromParams';\nimport {\n  TOGGLE_MAP,\n  loadToolDataForCurrentContext,\n  SELECT_YEARS,\n  loadNodes,\n  loadLinks\n} from 'scripts/actions/tool.actions';\nimport { getContextById } from 'scripts/reducers/helpers/contextHelper';\nimport getPageTitle from 'scripts/router/page-title';\nimport { redirect } from 'redux-first-router';\n\nexport const LOAD_STATE_FROM_URL = 'LOAD_STATE_FROM_URL';\nexport const LOAD_INITIAL_CONTEXT = 'LOAD_INITIAL_CONTEXT';\nexport const SET_CONTEXT = 'SET_CONTEXT';\nexport const DISPLAY_STORY_MODAL = 'DISPLAY_STORY_MODAL';\nexport const LOAD_TOOLTIP = 'LOAD_TOOLTIP';\nexport const SET_SANKEY_SIZE = 'SET_SANKEY_SIZE';\nexport const SET_TOOLTIPS = 'SET_TOOLTIPS';\nexport const SHOW_DISCLAIMER = 'SHOW_DISCLAIMER';\nexport const TOGGLE_DROPDOWN = 'TOGGLE_DROPDOWN';\nexport const TOGGLE_MAP_LAYERS_MENU = 'TOGGLE_MAP_LAYERS_MENU';\nexport const CLOSE_STORY_MODAL = 'CLOSE_STORY_MODAL';\nexport const SET_SEARCH_TERM = 'SET_SEARCH_TERM';\nexport const LOAD_SEARCH_RESULTS = 'LOAD_SEARCH_RESULTS';\nexport const SET_CONTEXTS = 'SET_CONTEXTS';\nexport const SET_CONTEXT_IS_USER_SELECTED = 'SET_CONTEXT_IS_USER_SELECTED';\nexport const APP__SET_LOADING = 'APP__SET_LOADING';\n\nexport function selectInitialContextById(contextId) {\n  return (dispatch, getState) => {\n    const selectedContext = getContextById(getState(), contextId);\n\n    dispatch({\n      type: LOAD_INITIAL_CONTEXT,\n      payload: selectedContext\n    });\n\n    document.title = getPageTitle(getState());\n  };\n}\n\nexport function setContextIsUserSelected(contextIsUserSelected) {\n  return {\n    type: SET_CONTEXT_IS_USER_SELECTED,\n    payload: contextIsUserSelected\n  };\n}\n\nexport function selectContextById(contextId) {\n  return (dispatch, getState) => {\n    const selectedContext = getContextById(getState(), contextId);\n\n    dispatch({\n      type: SET_CONTEXT,\n      payload: selectedContext\n    });\n\n    dispatch(setContextIsUserSelected(true));\n\n    if (getState().location.type === 'tool') {\n      dispatch(loadToolDataForCurrentContext());\n    }\n\n    document.title = getPageTitle(getState());\n  };\n}\n\nexport function resize() {\n  return {\n    type: SET_SANKEY_SIZE\n  };\n}\n\nexport function toggleMap(forceState = null) {\n  return dispatch => {\n    dispatch({\n      type: TOGGLE_MAP,\n      forceState\n    });\n    dispatch({ type: SET_SANKEY_SIZE });\n  };\n}\n\nexport function toggleMapLayerMenu() {\n  return dispatch => {\n    dispatch({\n      type: TOGGLE_MAP_LAYERS_MENU\n    });\n    dispatch({ type: SET_SANKEY_SIZE });\n  };\n}\n\nexport function loadTooltip() {\n  return {\n    type: LOAD_TOOLTIP\n  };\n}\n\nexport function closeStoryModal() {\n  return {\n    type: CLOSE_STORY_MODAL\n  };\n}\n\nexport function loadDisclaimer() {\n  return dispatch => {\n    const disclaimerLocal = localStorage.getItem('disclaimerVersion');\n\n    const url = getURLFromParams(GET_DISCLAIMER_URL);\n    fetch(url)\n      .then(resp => resp.text())\n      .then(resp => JSON.parse(resp))\n      .then(disclaimer => {\n        if (disclaimerLocal !== null && parseInt(disclaimerLocal, 10) >= disclaimer.version) {\n          return;\n        }\n\n        localStorage.setItem('disclaimerVersion', disclaimer.version);\n\n        dispatch({\n          type: SHOW_DISCLAIMER,\n          disclaimerContent: disclaimer.content\n        });\n      });\n  };\n}\n\nexport function toggleDropdown(dropdownId) {\n  return {\n    type: TOGGLE_DROPDOWN,\n    dropdownId\n  };\n}\n\nexport function displayStoryModal(storyId) {\n  return dispatch => {\n    fetch(`${getURLFromParams(GET_SITE_DIVE_URL)}/${storyId}`)\n      .then(resp => {\n        if (resp.ok) return resp.text();\n        throw new Error(resp.statusText);\n      })\n      .then(resp => JSON.parse(resp))\n      .then(({ data }) =>\n        dispatch({\n          type: DISPLAY_STORY_MODAL,\n          payload: {\n            visibility: true,\n            modalParams: data\n          }\n        })\n      )\n      .catch(err => {\n        console.error('Error loading site dive.', err);\n      });\n  };\n}\n\nexport function resetSearchResults() {\n  return {\n    type: SET_SEARCH_TERM,\n    payload: { term: '', results: [] }\n  };\n}\n\nexport const setLanguage = lang => (dispatch, getState) => {\n  const { location } = getState();\n  const query = { ...location.query, lang };\n  const payload = { ...location.payload, query };\n  return dispatch(redirect({ type: location.type, payload }));\n};\n\nexport function loadSearchResults(searchTerm) {\n  return dispatch => {\n    const url = `${getURLFromParams(GET_NODES_WITH_SEARCH_URL)}?query=${searchTerm}`;\n\n    if (isEmpty(searchTerm)) {\n      dispatch(resetSearchResults());\n      return;\n    }\n\n    dispatch({\n      type: SET_SEARCH_TERM,\n      payload: { term: searchTerm, isLoading: true }\n    });\n\n    fetch(url)\n      .then(resp => resp.json())\n      .then(results => {\n        dispatch({\n          type: LOAD_SEARCH_RESULTS,\n          payload: { term: searchTerm, results: results.data }\n        });\n      })\n      .catch(() => {\n        dispatch({\n          type: LOAD_SEARCH_RESULTS,\n          payload: { term: searchTerm, results: [] }\n        });\n      });\n  };\n}\n\nexport function selectYears(years) {\n  return (dispatch, getState) => {\n    const { location } = getState();\n    dispatch({\n      type: SELECT_YEARS,\n      years\n    });\n    if (location.type === 'tool') {\n      dispatch(loadNodes());\n      dispatch(loadLinks());\n    }\n  };\n}\n"]}]}
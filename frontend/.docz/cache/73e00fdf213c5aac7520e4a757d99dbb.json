{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/components/tool/map-context.component.js","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/components/tool/map-context.component.js","mtime":1543486759491},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nimport ContextLayersTemplate from 'templates/tool/map/map-context.ejs';\nimport 'styles/components/shared/switcher.scss';\nimport 'styles/components/tool/map/map-context.scss';\n\nvar _default =\n/*#__PURE__*/\nfunction () {\n  function _default() {\n    _classCallCheck(this, _default);\n  }\n\n  _createClass(_default, [{\n    key: \"onCreated\",\n    value: function onCreated() {\n      this.el = document.querySelector('.js-map-context');\n      this.items = document.querySelector('.js-map-context-items');\n    }\n  }, {\n    key: \"buildLayers\",\n    value: function buildLayers(_ref) {\n      var _this = this;\n\n      var layers = _ref.layers,\n          selectedMapContextualLayers = _ref.selectedMapContextualLayers;\n      this.items.innerHTML = ContextLayersTemplate({\n        layers: layers\n      });\n\n      if (layers.length > 0) {\n        this.el.classList.remove('is-hidden');\n      } else {\n        this.el.classList.add('is-hidden');\n      }\n\n      this.callbacks.onMapDimensionsLoaded();\n      this.switchers = Array.prototype.slice.call(this.items.querySelectorAll('.c-switcher'), 0);\n      this.switchers.forEach(function (switcher) {\n        switcher.addEventListener('click', function (e) {\n          return _this._onToggleSwitcher(e);\n        });\n      });\n      this.selectContextualLayers(selectedMapContextualLayers);\n    }\n  }, {\n    key: \"selectContextualLayers\",\n    value: function selectContextualLayers(selectedMapContextualLayers) {\n      if (this.switchers === undefined) {\n        return;\n      }\n\n      if (selectedMapContextualLayers !== undefined && selectedMapContextualLayers !== null && selectedMapContextualLayers.length) {\n        this._setActiveContextualLayers(selectedMapContextualLayers);\n      }\n    }\n  }, {\n    key: \"_setActiveContextualLayers\",\n    value: function _setActiveContextualLayers(selectedMapContextualLayers) {\n      var _this2 = this;\n\n      selectedMapContextualLayers.forEach(function (layerSlug) {\n        _this2.switchers.forEach(function (switcher) {\n          if (switcher.getAttribute('data-layer-slug') !== layerSlug) return;\n          switcher.closest('.js-map-context-item').classList.add('-selected');\n          switcher.classList.add('-enabled');\n        });\n      });\n    }\n  }, {\n    key: \"_onToggleSwitcher\",\n    value: function _onToggleSwitcher(e) {\n      var switcher = e && e.currentTarget;\n      if (!switcher) return;\n      switcher.closest('.js-map-context-item').classList.toggle('-selected');\n      switcher.classList.toggle('-enabled');\n\n      var layers = this._getActivelayers();\n\n      this.callbacks.onContextualLayerSelected(layers);\n    }\n  }, {\n    key: \"_getActivelayers\",\n    value: function _getActivelayers() {\n      var activeLayers = [];\n      this.switchers.forEach(function (switcher) {\n        if (!switcher.classList.contains('-enabled')) return;\n        var layerSlug = switcher.getAttribute('data-layer-slug');\n        activeLayers.push(layerSlug);\n      });\n      return activeLayers;\n    }\n  }]);\n\n  return _default;\n}();\n\nexport { _default as default };\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_classCallCheck, \"_classCallCheck\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/components/tool/map-context.component.js\");\n  reactHotLoader.register(_defineProperties, \"_defineProperties\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/components/tool/map-context.component.js\");\n  reactHotLoader.register(_createClass, \"_createClass\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/components/tool/map-context.component.js\");\n  reactHotLoader.register(_default, \"_default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/components/tool/map-context.component.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/components/tool/map-context.component.js"],"names":["document","layers","selectedMapContextualLayers","ContextLayersTemplate","Array","switcher","e","activeLayers","layerSlug"],"mappings":"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","sourcesContent":["import ContextLayersTemplate from 'templates/tool/map/map-context.ejs';\nimport 'styles/components/shared/switcher.scss';\nimport 'styles/components/tool/map/map-context.scss';\n\nexport default class {\n  onCreated() {\n    this.el = document.querySelector('.js-map-context');\n    this.items = document.querySelector('.js-map-context-items');\n  }\n\n  buildLayers({ layers, selectedMapContextualLayers }) {\n    this.items.innerHTML = ContextLayersTemplate({ layers });\n\n    if (layers.length > 0) {\n      this.el.classList.remove('is-hidden');\n    } else {\n      this.el.classList.add('is-hidden');\n    }\n\n    this.callbacks.onMapDimensionsLoaded();\n\n    this.switchers = Array.prototype.slice.call(this.items.querySelectorAll('.c-switcher'), 0);\n\n    this.switchers.forEach(switcher => {\n      switcher.addEventListener('click', e => this._onToggleSwitcher(e));\n    });\n\n    this.selectContextualLayers(selectedMapContextualLayers);\n  }\n\n  selectContextualLayers(selectedMapContextualLayers) {\n    if (this.switchers === undefined) {\n      return;\n    }\n    if (\n      selectedMapContextualLayers !== undefined &&\n      selectedMapContextualLayers !== null &&\n      selectedMapContextualLayers.length\n    ) {\n      this._setActiveContextualLayers(selectedMapContextualLayers);\n    }\n  }\n\n  _setActiveContextualLayers(selectedMapContextualLayers) {\n    selectedMapContextualLayers.forEach(layerSlug => {\n      this.switchers.forEach(switcher => {\n        if (switcher.getAttribute('data-layer-slug') !== layerSlug) return;\n        switcher.closest('.js-map-context-item').classList.add('-selected');\n        switcher.classList.add('-enabled');\n      });\n    });\n  }\n\n  _onToggleSwitcher(e) {\n    const switcher = e && e.currentTarget;\n    if (!switcher) return;\n\n    switcher.closest('.js-map-context-item').classList.toggle('-selected');\n    switcher.classList.toggle('-enabled');\n\n    const layers = this._getActivelayers();\n    this.callbacks.onContextualLayerSelected(layers);\n  }\n\n  _getActivelayers() {\n    const activeLayers = [];\n\n    this.switchers.forEach(switcher => {\n      if (!switcher.classList.contains('-enabled')) return;\n\n      const layerSlug = switcher.getAttribute('data-layer-slug');\n      activeLayers.push(layerSlug);\n    });\n\n    return activeLayers;\n  }\n}\n"]}]}
{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx","mtime":1548345115598},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport capitalize from 'lodash/capitalize';\nimport Line from 'react-components/profiles/line/line.component';\nimport { withTranslation } from 'react-components/nav/locale-selector/with-translation.hoc';\nimport formatValue from 'utils/formatValue';\nimport DropdownTabSwitcher from 'react-components/profiles/dropdown-tab-switcher/dropdown-tab-switcher.component';\nimport UnitsTooltip from 'react-components/shared/units-tooltip/units-tooltip.component';\nimport Heading from 'react-components/shared/heading/heading.component';\nvar TranslatedLine = withTranslation(Line);\n\nvar TopDestinationsChart =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(TopDestinationsChart, _React$PureComponent);\n\n  function TopDestinationsChart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TopDestinationsChart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TopDestinationsChart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      tooltipConfig: null\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onMouseMove\", function (location, x, y) {\n      var text = \"\".concat(_this.props.nodeName, \" > \").concat(location.name.toUpperCase(), \", \").concat(location.date.getFullYear());\n      var title = 'Trade Volume';\n      var unit = 't';\n      var value = formatValue(location.value, 'Trade volume');\n      var tooltipConfig = {\n        x: x,\n        y: y,\n        text: text,\n        items: [{\n          title: title,\n          value: value,\n          unit: unit\n        }]\n      };\n\n      _this.setState(function () {\n        return {\n          tooltipConfig: tooltipConfig\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onMouseLeave\", function () {\n      _this.setState(function () {\n        return {\n          tooltipConfig: null\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"margin\", {\n      top: 10,\n      right: 100,\n      bottom: 30,\n      left: 50\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"height\", 244);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"ticks\", {\n      yTicks: 6,\n      yTickPadding: 10,\n      yTickFormatType: 'top-location',\n      xTickPadding: 15\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"lineClassNameCallback\", function (lineIndex, lineDefaultStyle) {\n      return \"\".concat(lineDefaultStyle, \" line-\").concat(lineIndex);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleLinkClick\", function (linkTarget, query) {\n      _this.props.onLinkClick(linkTarget, query);\n    });\n\n    return _this;\n  }\n\n  _createClass(TopDestinationsChart, [{\n    key: \"getTitle\",\n    value: function getTitle() {\n      var _this$props = this.props,\n          type = _this$props.type,\n          year = _this$props.year,\n          nodeName = _this$props.nodeName,\n          verb = _this$props.verb,\n          commodityName = _this$props.commodityName;\n      var noun = type === 'countries' ? 'destination countries' : 'sourcing regions';\n      return React.createElement(React.Fragment, null, \"Top \", noun, \" of \", commodityName, \" \", verb, \" by\", ' ', React.createElement(\"span\", {\n        className: \"notranslate\"\n      }, capitalize(nodeName)), \" in\", ' ', React.createElement(\"span\", {\n        className: \"notranslate\"\n      }, year), \":\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          year = _this$props2.year,\n          profileType = _this$props2.profileType,\n          unit = _this$props2.unit,\n          type = _this$props2.type,\n          style = _this$props2.style,\n          includedYears = _this$props2.includedYears,\n          tabs = _this$props2.tabs,\n          onChangeTab = _this$props2.onChangeTab,\n          height = _this$props2.height,\n          lines = _this$props2.lines,\n          contextId = _this$props2.contextId,\n          testId = _this$props2.testId;\n      var tooltipConfig = this.state.tooltipConfig;\n      var heightStyle = TopDestinationsChart.getIsMobile() ? {\n        minHeigh: height\n      } : {\n        height: height\n      };\n      return React.createElement(React.Fragment, null, React.createElement(UnitsTooltip, _extends({\n        show: !!tooltipConfig\n      }, tooltipConfig)), React.createElement(\"div\", {\n        className: \"top-destinations-chart-container\"\n      }, React.createElement(\"div\", null, type === 'countries' ? React.createElement(Heading, {\n        variant: \"mono\",\n        weight: \"bold\",\n        as: \"h3\",\n        size: \"sm\",\n        \"data-test\": \"\".concat(testId, \"-title\")\n      }, this.getTitle()) : React.createElement(DropdownTabSwitcher, {\n        title: this.getTitle(),\n        items: tabs,\n        onSelectedIndexChange: onChangeTab,\n        testId: \"\".concat(testId, \"-switch\")\n      })), React.createElement(\"div\", {\n        className: \"top-destinations-chart-container\",\n        style: _objectSpread({}, heightStyle, {\n          width: '100%'\n        })\n      }, React.createElement(TranslatedLine, {\n        onLinkClick: this.handleLinkClick,\n        profileType: profileType,\n        unit: unit,\n        contextId: contextId,\n        lines: lines,\n        style: style,\n        xValues: includedYears,\n        useBottomLegend: true,\n        year: year,\n        showTooltipCallback: this.onMouseMove,\n        hideTooltipCallback: this.onMouseLeave,\n        lineClassNameCallback: this.lineClassNameCallback,\n        margin: this.margin,\n        settingsHeight: this.height,\n        ticks: this.ticks,\n        testId: \"\".concat(testId, \"-d3\")\n      }))));\n    }\n  }], [{\n    key: \"getIsMobile\",\n    value: function getIsMobile() {\n      return window.innerWidth <= 640; // value needs to match with entrypoints.scss variable\n    }\n  }]);\n\n  return TopDestinationsChart;\n}(React.PureComponent);\n\nTopDestinationsChart.propTypes = {\n  tabs: PropTypes.array,\n  testId: PropTypes.string,\n  onChangeTab: PropTypes.func,\n  onLinkClick: PropTypes.func,\n  profileType: PropTypes.string,\n  commodityName: PropTypes.string,\n  contextId: PropTypes.number.isRequired,\n  verb: PropTypes.string.isRequired,\n  lines: PropTypes.array.isRequired,\n  type: PropTypes.string.isRequired,\n  year: PropTypes.number.isRequired,\n  unit: PropTypes.string.isRequired,\n  style: PropTypes.object.isRequired,\n  height: PropTypes.number.isRequired,\n  nodeName: PropTypes.string,\n  includedYears: PropTypes.array.isRequired\n};\nvar _default = TopDestinationsChart;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_typeof, \"_typeof\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_objectSpread, \"_objectSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_extends, \"_extends\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_classCallCheck, \"_classCallCheck\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_defineProperties, \"_defineProperties\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_createClass, \"_createClass\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_possibleConstructorReturn, \"_possibleConstructorReturn\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_getPrototypeOf, \"_getPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_inherits, \"_inherits\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_setPrototypeOf, \"_setPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_assertThisInitialized, \"_assertThisInitialized\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_defineProperty, \"_defineProperty\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(TranslatedLine, \"TranslatedLine\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(TopDestinationsChart, \"TopDestinationsChart\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/profiles/top-destinations-chart.component.jsx"],"names":["TranslatedLine","withTranslation","TopDestinationsChart","React","PureComponent","tooltipConfig","window","text","location","title","unit","value","formatValue","x","y","items","top","right","bottom","left","yTicks","yTickPadding","yTickFormatType","xTickPadding","type","year","nodeName","verb","commodityName","noun","capitalize","profileType","style","includedYears","tabs","onChangeTab","height","lines","contextId","testId","heightStyle","minHeigh","width","PropTypes","onLinkClick","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport capitalize from 'lodash/capitalize';\nimport Line from 'react-components/profiles/line/line.component';\nimport { withTranslation } from 'react-components/nav/locale-selector/with-translation.hoc';\nimport formatValue from 'utils/formatValue';\nimport DropdownTabSwitcher from 'react-components/profiles/dropdown-tab-switcher/dropdown-tab-switcher.component';\nimport UnitsTooltip from 'react-components/shared/units-tooltip/units-tooltip.component';\nimport Heading from 'react-components/shared/heading/heading.component';\n\nconst TranslatedLine = withTranslation(Line);\n\nclass TopDestinationsChart extends React.PureComponent {\n  state = { tooltipConfig: null };\n\n  static getIsMobile() {\n    return window.innerWidth <= 640; // value needs to match with entrypoints.scss variable\n  }\n\n  onMouseMove = (location, x, y) => {\n    const text = `${\n      this.props.nodeName\n    } > ${location.name.toUpperCase()}, ${location.date.getFullYear()}`;\n    const title = 'Trade Volume';\n    const unit = 't';\n    const value = formatValue(location.value, 'Trade volume');\n    const tooltipConfig = { x, y, text, items: [{ title, value, unit }] };\n    this.setState(() => ({ tooltipConfig }));\n  };\n\n  onMouseLeave = () => {\n    this.setState(() => ({ tooltipConfig: null }));\n  };\n\n  margin = {\n    top: 10,\n    right: 100,\n    bottom: 30,\n    left: 50\n  };\n\n  height = 244;\n\n  ticks = {\n    yTicks: 6,\n    yTickPadding: 10,\n    yTickFormatType: 'top-location',\n    xTickPadding: 15\n  };\n\n  lineClassNameCallback = (lineIndex, lineDefaultStyle) => `${lineDefaultStyle} line-${lineIndex}`;\n\n  getTitle() {\n    const { type, year, nodeName, verb, commodityName } = this.props;\n    const noun = type === 'countries' ? 'destination countries' : 'sourcing regions';\n    return (\n      <React.Fragment>\n        Top {noun} of {commodityName} {verb} by{' '}\n        <span className=\"notranslate\">{capitalize(nodeName)}</span> in{' '}\n        <span className=\"notranslate\">{year}</span>:\n      </React.Fragment>\n    );\n  }\n\n  handleLinkClick = (linkTarget, query) => {\n    this.props.onLinkClick(linkTarget, query);\n  };\n\n  render() {\n    const {\n      year,\n      profileType,\n      unit,\n      type,\n      style,\n      includedYears,\n      tabs,\n      onChangeTab,\n      height,\n      lines,\n      contextId,\n      testId\n    } = this.props;\n    const { tooltipConfig } = this.state;\n    const heightStyle = TopDestinationsChart.getIsMobile() ? { minHeigh: height } : { height };\n    return (\n      <React.Fragment>\n        <UnitsTooltip show={!!tooltipConfig} {...tooltipConfig} />\n        <div className=\"top-destinations-chart-container\">\n          <div>\n            {type === 'countries' ? (\n              <Heading variant=\"mono\" weight=\"bold\" as=\"h3\" size=\"sm\" data-test={`${testId}-title`}>\n                {this.getTitle()}\n              </Heading>\n            ) : (\n              <DropdownTabSwitcher\n                title={this.getTitle()}\n                items={tabs}\n                onSelectedIndexChange={onChangeTab}\n                testId={`${testId}-switch`}\n              />\n            )}\n          </div>\n          <div\n            className=\"top-destinations-chart-container\"\n            style={{ ...heightStyle, width: '100%' }}\n          >\n            <TranslatedLine\n              onLinkClick={this.handleLinkClick}\n              profileType={profileType}\n              unit={unit}\n              contextId={contextId}\n              lines={lines}\n              style={style}\n              xValues={includedYears}\n              useBottomLegend\n              year={year}\n              showTooltipCallback={this.onMouseMove}\n              hideTooltipCallback={this.onMouseLeave}\n              lineClassNameCallback={this.lineClassNameCallback}\n              margin={this.margin}\n              settingsHeight={this.height}\n              ticks={this.ticks}\n              testId={`${testId}-d3`}\n            />\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nTopDestinationsChart.propTypes = {\n  tabs: PropTypes.array,\n  testId: PropTypes.string,\n  onChangeTab: PropTypes.func,\n  onLinkClick: PropTypes.func,\n  profileType: PropTypes.string,\n  commodityName: PropTypes.string,\n  contextId: PropTypes.number.isRequired,\n  verb: PropTypes.string.isRequired,\n  lines: PropTypes.array.isRequired,\n  type: PropTypes.string.isRequired,\n  year: PropTypes.number.isRequired,\n  unit: PropTypes.string.isRequired,\n  style: PropTypes.object.isRequired,\n  height: PropTypes.number.isRequired,\n  nodeName: PropTypes.string,\n  includedYears: PropTypes.array.isRequired\n};\n\nexport default TopDestinationsChart;\n"]}]}
{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/base/Container.js","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/base/Container.js","mtime":1543486759489},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar _default =\n/*#__PURE__*/\nfunction () {\n  function _default(store, ViewClass, mapMethodsToState, mapViewCallbacksToActions, onCreated, ownProps) {\n    var _this = this;\n\n    _classCallCheck(this, _default); // instanciate the component\n\n\n    this.view = new ViewClass(ownProps); // listen to all app state updates\n\n    if (mapMethodsToState) {\n      this.unsubscribe = store.subscribe(function () {\n        return _this._onStateChange(store.getState());\n      });\n    } // an internal representation of the state props that this component is interested in\n    // used for diffing of these props and app state\n    // as opposed to React, _props are not intended to be used by containers or components\n\n\n    this._props = {}; // component methods that should be called, for a given prop of the app state\n    // method names are used as dict keys\n\n    this._methodsToState = mapMethodsToState; // make container callbacks available to the component\n\n    if (mapViewCallbacksToActions) {\n      this.view.callbacks = this._prepareCallbacks(store, mapViewCallbacksToActions());\n    } // use this as a chance to dispatch an action when component is instanciated (always miss this in react-redux)\n\n\n    if (onCreated) onCreated(store.dispatch);\n    if (this.view.onCreated) this.view.onCreated();\n  }\n\n  _createClass(_default, [{\n    key: \"remove\",\n    value: function remove() {\n      if (this.view.onRemoved) this.view.onRemoved();\n\n      if (this.unsubscribe) {\n        this.unsubscribe();\n      }\n\n      this.view = null;\n      this._props = null;\n    }\n  }, {\n    key: \"_onStateChange\",\n    value: function _onStateChange(state) {\n      var _this2 = this; // if view was already removed, but dispatched actions were in progress\n\n\n      if (!this.view) return; // returns a method - state values dictionary\n\n      var methodsToState = this._methodsToState(state);\n\n      Object.keys(methodsToState).forEach(function (k) {\n        var stateValue = methodsToState[k];\n        var comparedValue = stateValue && stateValue._comparedValue ? stateValue._comparedValue(state) : stateValue; // check if internal _prop differs from new app state value\n\n        if (comparedValue !== undefined && comparedValue !== _this2._props[k]) {\n          // in which case update internal _props\n          _this2._props[k] = comparedValue; // and call the method (k, the dict key) directly on the component\n\n          if (_this2.view[k]) {\n            var returnedValue = stateValue && stateValue._returnedValue ? stateValue._returnedValue(state) : comparedValue;\n\n            _this2.view[k](returnedValue);\n          } else {\n            console.warn(\"trying to call \".concat(k, \" on view but it doesn't exist\"));\n          }\n        }\n      });\n    } // called once at container init\n    // binds component callbacks to ac tion generators set in the container\n\n  }, {\n    key: \"_prepareCallbacks\",\n    value: function _prepareCallbacks(store, callbacksToActions) {\n      // collect all callbacks names\n      var callbackKeys = Object.keys(callbacksToActions);\n      var callbacks = {};\n      callbackKeys.forEach(function (k) {\n        // the method set up in the container, which should return an action\n        var actionGenerator = callbacksToActions[k]; // replace dict entry with a function that dispatches the action to the store instead of just returning it\n\n        callbacks[k] = function () {\n          return store.dispatch(actionGenerator.apply(void 0, arguments));\n        };\n      });\n      return callbacks;\n    }\n  }]);\n\n  return _default;\n}();\n\nexport { _default as default };\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_classCallCheck, \"_classCallCheck\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/base/Container.js\");\n  reactHotLoader.register(_defineProperties, \"_defineProperties\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/base/Container.js\");\n  reactHotLoader.register(_createClass, \"_createClass\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/base/Container.js\");\n  reactHotLoader.register(_default, \"_default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/base/Container.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/base/Container.js"],"names":["store","mapViewCallbacksToActions","onCreated","state","methodsToState","Object","stateValue","comparedValue","returnedValue","console","callbacksToActions","callbackKeys","callbacks","actionGenerator"],"mappings":"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","sourcesContent":["export default class {\n  constructor(store, ViewClass, mapMethodsToState, mapViewCallbacksToActions, onCreated, ownProps) {\n    // instanciate the component\n    this.view = new ViewClass(ownProps);\n\n    // listen to all app state updates\n    if (mapMethodsToState) {\n      this.unsubscribe = store.subscribe(() => this._onStateChange(store.getState()));\n    }\n\n    // an internal representation of the state props that this component is interested in\n    // used for diffing of these props and app state\n    // as opposed to React, _props are not intended to be used by containers or components\n    this._props = {};\n\n    // component methods that should be called, for a given prop of the app state\n    // method names are used as dict keys\n    this._methodsToState = mapMethodsToState;\n\n    // make container callbacks available to the component\n    if (mapViewCallbacksToActions) {\n      this.view.callbacks = this._prepareCallbacks(store, mapViewCallbacksToActions());\n    }\n\n    // use this as a chance to dispatch an action when component is instanciated (always miss this in react-redux)\n    if (onCreated) onCreated(store.dispatch);\n\n    if (this.view.onCreated) this.view.onCreated();\n  }\n\n  remove() {\n    if (this.view.onRemoved) this.view.onRemoved();\n\n    if (this.unsubscribe) {\n      this.unsubscribe();\n    }\n\n    this.view = null;\n    this._props = null;\n  }\n\n  _onStateChange(state) {\n    // if view was already removed, but dispatched actions were in progress\n    if (!this.view) return;\n    // returns a method - state values dictionary\n    const methodsToState = this._methodsToState(state);\n    Object.keys(methodsToState).forEach(k => {\n      const stateValue = methodsToState[k];\n      const comparedValue =\n        stateValue && stateValue._comparedValue ? stateValue._comparedValue(state) : stateValue;\n\n      // check if internal _prop differs from new app state value\n      if (comparedValue !== undefined && comparedValue !== this._props[k]) {\n        // in which case update internal _props\n        this._props[k] = comparedValue;\n        // and call the method (k, the dict key) directly on the component\n        if (this.view[k]) {\n          const returnedValue =\n            stateValue && stateValue._returnedValue\n              ? stateValue._returnedValue(state)\n              : comparedValue;\n          this.view[k](returnedValue);\n        } else {\n          console.warn(`trying to call ${k} on view but it doesn't exist`);\n        }\n      }\n    });\n  }\n\n  // called once at container init\n  // binds component callbacks to ac tion generators set in the container\n  _prepareCallbacks(store, callbacksToActions) {\n    // collect all callbacks names\n    const callbackKeys = Object.keys(callbacksToActions);\n    const callbacks = {};\n    callbackKeys.forEach(k => {\n      // the method set up in the container, which should return an action\n      const actionGenerator = callbacksToActions[k];\n      // replace dict entry with a function that dispatches the action to the store instead of just returning it\n      callbacks[k] = (...payload) => store.dispatch(actionGenerator(...payload));\n    });\n    return callbacks;\n  }\n}\n"]}]}
{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js","mtime":1548840716973},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nvar _appReducer;\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport { DISPLAY_STORY_MODAL, LOAD_SEARCH_RESULTS, LOAD_TOOLTIP, SET_SANKEY_SIZE, SET_SEARCH_TERM, SET_TOOLTIPS, SHOW_DISCLAIMER, TOGGLE_DROPDOWN, TOGGLE_MAP_LAYERS_MENU, SET_CONTEXTS, SET_CONTEXT_IS_USER_SELECTED, SET_CONTEXT, LOAD_INITIAL_CONTEXT, LOAD_STATE_FROM_URL, APP__SET_LOADING } from 'actions/app.actions';\nimport createReducer from 'utils/createReducer';\nimport { SELECT_YEARS } from 'actions/tool.actions';\nvar initialState = {\n  windowSize: [window.innerWidth, window.innerHeight],\n  isMapLayerVisible: false,\n  isAppMenuVisible: false,\n  tooltipCheck: 0,\n  tooltips: null,\n  contextIsUserSelected: !SHOW_WORLD_MAP_IN_EXPLORE,\n  currentDropdown: null,\n  modal: {\n    visibility: false,\n    modalParams: null\n  },\n  search: {\n    term: '',\n    isLoading: false,\n    results: []\n  },\n  selectedContext: null,\n  initialSelectedContextIdFromURL: null,\n  // IMPORTANT: this should only be used to load context by id from the URL\n  contexts: [],\n  loading: {\n    contexts: false,\n    tooltips: false\n  },\n  selectedYears: []\n};\n\nvar isSankeyExpanded = function isSankeyExpanded(state) {\n  return state.isMapLayerVisible !== true && state.isMapVisible !== true;\n};\n\nvar appReducer = (_appReducer = {}, _defineProperty(_appReducer, LOAD_STATE_FROM_URL, function (state, action) {\n  return _objectSpread({}, state, {\n    initialDataLoading: true\n  }, action.payload.app);\n}), _defineProperty(_appReducer, SET_SANKEY_SIZE, function (state) {\n  if (isSankeyExpanded(state)) {\n    return Object.assign({}, state, {\n      sankeySize: [window.innerWidth - 392, window.innerHeight - 175]\n    });\n  }\n\n  return state;\n}), _defineProperty(_appReducer, TOGGLE_MAP_LAYERS_MENU, function (state) {\n  return Object.assign({}, state, {\n    isMapLayerVisible: !state.isMapLayerVisible\n  });\n}), _defineProperty(_appReducer, LOAD_TOOLTIP, function (state) {\n  return Object.assign({}, state, {\n    tooltipCheck: (state.tooltipCheck || 0) + 1\n  });\n}), _defineProperty(_appReducer, SET_TOOLTIPS, function (state, action) {\n  return _objectSpread({}, state, {\n    tooltips: action.payload,\n    loading: _objectSpread({}, state.loading, {\n      tooltips: false\n    })\n  });\n}), _defineProperty(_appReducer, SHOW_DISCLAIMER, function (state, action) {\n  return Object.assign({}, state, {\n    modal: {\n      visibility: true,\n      modalParams: {\n        description: action.disclaimerContent\n      }\n    }\n  });\n}), _defineProperty(_appReducer, TOGGLE_DROPDOWN, function (state, action) {\n  var currentDropdown = action.dropdownId === state.currentDropdown ? null : action.dropdownId;\n  return Object.assign({}, state, {\n    currentDropdown: currentDropdown\n  });\n}), _defineProperty(_appReducer, DISPLAY_STORY_MODAL, function (state, action) {\n  return _objectSpread({}, state, {\n    modal: action.payload\n  });\n}), _defineProperty(_appReducer, SET_SEARCH_TERM, function (state, action) {\n  return _objectSpread({}, state, {\n    search: _objectSpread({}, state.search, action.payload)\n  });\n}), _defineProperty(_appReducer, LOAD_SEARCH_RESULTS, function (state, action) {\n  // if current search term is different than the one for results\n  // that means we can ignore those results as not the latest ones\n  if (state.search.term !== action.payload.term) return state;\n  return _objectSpread({}, state, {\n    search: _objectSpread({}, state.search, {\n      results: action.payload.results,\n      isLoading: false\n    })\n  });\n}), _defineProperty(_appReducer, SET_CONTEXTS, function (state, action) {\n  return _objectSpread({}, state, {\n    contexts: action.payload,\n    loading: _objectSpread({}, state.loading, {\n      contexts: false\n    })\n  });\n}), _defineProperty(_appReducer, SET_CONTEXT_IS_USER_SELECTED, function (state, action) {\n  return Object.assign({}, state, {\n    contextIsUserSelected: action.payload\n  });\n}), _defineProperty(_appReducer, SET_CONTEXT, function (state, action) {\n  var selectedContext = action.payload;\n  var selectedYears = [selectedContext.defaultYear, selectedContext.defaultYear];\n  return _objectSpread({}, state, {\n    selectedYears: selectedYears,\n    selectedContext: selectedContext\n  });\n}), _defineProperty(_appReducer, LOAD_INITIAL_CONTEXT, function (state, action) {\n  var selectedContext = action.payload;\n  var selectedYears = state.selectedYears.length > 0 ? state.selectedYears : [selectedContext.defaultYear, selectedContext.defaultYear];\n  return _objectSpread({}, state, {\n    selectedYears: selectedYears,\n    selectedContext: selectedContext\n  });\n}), _defineProperty(_appReducer, APP__SET_LOADING, function (state, action) {\n  var _state$loading = state.loading,\n      contextsLoading = _state$loading.contexts,\n      tooltipsLoading = _state$loading.tooltips;\n  var _action$payload = action.payload,\n      _action$payload$conte = _action$payload.contexts,\n      contexts = _action$payload$conte === void 0 ? contextsLoading : _action$payload$conte,\n      _action$payload$toolt = _action$payload.tooltips,\n      tooltips = _action$payload$toolt === void 0 ? tooltipsLoading : _action$payload$toolt;\n  return _objectSpread({}, state, {\n    loading: {\n      contexts: contexts,\n      tooltips: tooltips\n    }\n  });\n}), _defineProperty(_appReducer, SELECT_YEARS, function (state, action) {\n  return _objectSpread({}, state, {\n    selectedYears: action.years\n  });\n}), _appReducer);\n\nvar appReducerTypes = function appReducerTypes(PropTypes) {\n  return {\n    contexts: PropTypes.arrayOf(PropTypes.object).isRequired,\n    contextIsUserSelected: PropTypes.bool.isRequired,\n    currentDropdown: PropTypes.string,\n    isMapLayerVisible: PropTypes.bool,\n    isAppMenuVisible: PropTypes.bool,\n    modal: PropTypes.shape({\n      visibility: PropTypes.bool,\n      modalParams: PropTypes.object\n    }).isRequired,\n    search: PropTypes.shape({\n      term: PropTypes.string.isRequired,\n      isLoading: PropTypes.bool.isRequired,\n      results: PropTypes.arrayOf(PropTypes.object).isRequired\n    }).isRequired,\n    selectedContext: PropTypes.object,\n    initialSelectedContextIdFromURL: PropTypes.number,\n    tooltips: PropTypes.object,\n    tooltipCheck: PropTypes.number,\n    windowSize: PropTypes.arrayOf(PropTypes.number).isRequired,\n    selectedYears: PropTypes.arrayOf(PropTypes.number).isRequired\n  };\n};\n\nvar _default = createReducer(initialState, appReducer, appReducerTypes);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_appReducer, \"_appReducer\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js\");\n  reactHotLoader.register(_objectSpread, \"_objectSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js\");\n  reactHotLoader.register(_defineProperty, \"_defineProperty\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js\");\n  reactHotLoader.register(initialState, \"initialState\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js\");\n  reactHotLoader.register(isSankeyExpanded, \"isSankeyExpanded\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js\");\n  reactHotLoader.register(appReducer, \"appReducer\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js\");\n  reactHotLoader.register(appReducerTypes, \"appReducerTypes\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/reducers/app.reducer.js"],"names":["initialState","windowSize","window","isMapLayerVisible","isAppMenuVisible","tooltipCheck","tooltips","contextIsUserSelected","currentDropdown","modal","visibility","modalParams","search","term","isLoading","results","selectedContext","initialSelectedContextIdFromURL","contexts","loading","selectedYears","isSankeyExpanded","state","appReducer","initialDataLoading","action","sankeySize","description","disclaimerContent","payload","contextsLoading","tooltipsLoading","years","appReducerTypes","PropTypes","object","isRequired","createReducer"],"mappings":"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","sourcesContent":["import {\n  DISPLAY_STORY_MODAL,\n  LOAD_SEARCH_RESULTS,\n  LOAD_TOOLTIP,\n  SET_SANKEY_SIZE,\n  SET_SEARCH_TERM,\n  SET_TOOLTIPS,\n  SHOW_DISCLAIMER,\n  TOGGLE_DROPDOWN,\n  TOGGLE_MAP_LAYERS_MENU,\n  SET_CONTEXTS,\n  SET_CONTEXT_IS_USER_SELECTED,\n  SET_CONTEXT,\n  LOAD_INITIAL_CONTEXT,\n  LOAD_STATE_FROM_URL,\n  APP__SET_LOADING\n} from 'actions/app.actions';\nimport createReducer from 'utils/createReducer';\nimport { SELECT_YEARS } from 'actions/tool.actions';\n\nconst initialState = {\n  windowSize: [window.innerWidth, window.innerHeight],\n  isMapLayerVisible: false,\n  isAppMenuVisible: false,\n  tooltipCheck: 0,\n  tooltips: null,\n  contextIsUserSelected: !SHOW_WORLD_MAP_IN_EXPLORE,\n  currentDropdown: null,\n  modal: {\n    visibility: false,\n    modalParams: null\n  },\n  search: {\n    term: '',\n    isLoading: false,\n    results: []\n  },\n  selectedContext: null,\n  initialSelectedContextIdFromURL: null, // IMPORTANT: this should only be used to load context by id from the URL\n  contexts: [],\n  loading: {\n    contexts: false,\n    tooltips: false\n  },\n  selectedYears: []\n};\n\nconst isSankeyExpanded = state => state.isMapLayerVisible !== true && state.isMapVisible !== true;\n\nconst appReducer = {\n  [LOAD_STATE_FROM_URL](state, action) {\n    return { ...state, initialDataLoading: true, ...action.payload.app };\n  },\n  [SET_SANKEY_SIZE](state) {\n    if (isSankeyExpanded(state)) {\n      return Object.assign({}, state, {\n        sankeySize: [window.innerWidth - 392, window.innerHeight - 175]\n      });\n    }\n    return state;\n  },\n  [TOGGLE_MAP_LAYERS_MENU](state) {\n    return Object.assign({}, state, { isMapLayerVisible: !state.isMapLayerVisible });\n  },\n  [LOAD_TOOLTIP](state) {\n    return Object.assign({}, state, { tooltipCheck: (state.tooltipCheck || 0) + 1 });\n  },\n  [SET_TOOLTIPS](state, action) {\n    return { ...state, tooltips: action.payload, loading: { ...state.loading, tooltips: false } };\n  },\n  [SHOW_DISCLAIMER](state, action) {\n    return Object.assign({}, state, {\n      modal: {\n        visibility: true,\n        modalParams: {\n          description: action.disclaimerContent\n        }\n      }\n    });\n  },\n  [TOGGLE_DROPDOWN](state, action) {\n    const currentDropdown = action.dropdownId === state.currentDropdown ? null : action.dropdownId;\n    return Object.assign({}, state, { currentDropdown });\n  },\n  [DISPLAY_STORY_MODAL](state, action) {\n    return { ...state, modal: action.payload };\n  },\n  [SET_SEARCH_TERM](state, action) {\n    return { ...state, search: { ...state.search, ...action.payload } };\n  },\n  [LOAD_SEARCH_RESULTS](state, action) {\n    // if current search term is different than the one for results\n    // that means we can ignore those results as not the latest ones\n    if (state.search.term !== action.payload.term) return state;\n\n    return {\n      ...state,\n      search: { ...state.search, results: action.payload.results, isLoading: false }\n    };\n  },\n  [SET_CONTEXTS](state, action) {\n    return { ...state, contexts: action.payload, loading: { ...state.loading, contexts: false } };\n  },\n  [SET_CONTEXT_IS_USER_SELECTED](state, action) {\n    return Object.assign({}, state, { contextIsUserSelected: action.payload });\n  },\n  [SET_CONTEXT](state, action) {\n    const selectedContext = action.payload;\n    const selectedYears = [selectedContext.defaultYear, selectedContext.defaultYear];\n\n    return { ...state, selectedYears, selectedContext };\n  },\n  [LOAD_INITIAL_CONTEXT](state, action) {\n    const selectedContext = action.payload;\n\n    const selectedYears =\n      state.selectedYears.length > 0\n        ? state.selectedYears\n        : [selectedContext.defaultYear, selectedContext.defaultYear];\n\n    return { ...state, selectedYears, selectedContext };\n  },\n  [APP__SET_LOADING](state, action) {\n    const { contexts: contextsLoading, tooltips: tooltipsLoading } = state.loading;\n    const { contexts = contextsLoading, tooltips = tooltipsLoading } = action.payload;\n    return { ...state, loading: { contexts, tooltips } };\n  },\n  [SELECT_YEARS](state, action) {\n    return { ...state, selectedYears: action.years };\n  }\n};\n\nconst appReducerTypes = PropTypes => ({\n  contexts: PropTypes.arrayOf(PropTypes.object).isRequired,\n  contextIsUserSelected: PropTypes.bool.isRequired,\n  currentDropdown: PropTypes.string,\n  isMapLayerVisible: PropTypes.bool,\n  isAppMenuVisible: PropTypes.bool,\n  modal: PropTypes.shape({\n    visibility: PropTypes.bool,\n    modalParams: PropTypes.object\n  }).isRequired,\n  search: PropTypes.shape({\n    term: PropTypes.string.isRequired,\n    isLoading: PropTypes.bool.isRequired,\n    results: PropTypes.arrayOf(PropTypes.object).isRequired\n  }).isRequired,\n  selectedContext: PropTypes.object,\n  initialSelectedContextIdFromURL: PropTypes.number,\n  tooltips: PropTypes.object,\n  tooltipCheck: PropTypes.number,\n  windowSize: PropTypes.arrayOf(PropTypes.number).isRequired,\n  selectedYears: PropTypes.arrayOf(PropTypes.number).isRequired\n});\n\nexport default createReducer(initialState, appReducer, appReducerTypes);\n"]}]}
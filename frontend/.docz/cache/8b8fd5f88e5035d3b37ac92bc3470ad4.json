{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx","mtime":1548345115563},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n/* eslint-disable jsx-a11y/no-static-element-interactions,jsx-a11y/no-noninteractive-element-interactions */\n\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'react-components/shared/help-tooltip/help-tooltip.component';\nimport FiltersDropdown from 'react-components/nav/filters-nav/filters-dropdown.component';\nimport RecolorByNodeLegendSummary from 'react-components/nav/filters-nav/recolor-by-selector/recolor-by-node-legend-summary/recolor-by-node-legend-summary.container';\nimport cx from 'classnames';\nimport isNumber from 'lodash/isNumber';\nimport difference from 'lodash/difference';\nimport sortBy from 'lodash/sortBy';\nimport 'styles/components/shared/dropdown-item-legend-summary.scss';\n\nvar RecolorBySelector =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RecolorBySelector, _Component);\n\n  function RecolorBySelector() {\n    _classCallCheck(this, RecolorBySelector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RecolorBySelector).apply(this, arguments));\n  }\n\n  _createClass(RecolorBySelector, [{\n    key: \"getRecolorByClassNames\",\n    value: function getRecolorByClassNames(item, recolorBy) {\n      var recolorById = isNumber(item) ? item + parseInt(recolorBy.minValue, 10) : item.toLowerCase();\n      var legendTypeName = recolorBy.legendType.toLowerCase();\n      var legendColorThemeName = recolorBy.legendColorTheme.toLowerCase();\n      return \"-recolorby-\".concat(legendTypeName, \"-\").concat(legendColorThemeName, \"-\").concat(recolorById).replace(/ /g, '-');\n    }\n  }, {\n    key: \"getRecolorData\",\n    value: function getRecolorData() {\n      var _this = this;\n\n      var _this$props = this.props,\n          recolorBys = _this$props.recolorBys,\n          selectedYears = _this$props.selectedYears,\n          tooltips = _this$props.tooltips;\n      var recolorByData = sortBy(recolorBys, ['groupNumber', 'position']).map(function (recolorBy) {\n        var legendItems = recolorBy.nodes.length > 0 ? recolorBy.nodes : _toConsumableArray(Array(recolorBy.intervalCount).keys());\n        var legendItemsData = legendItems.map(function (legendItem) {\n          var recolorByClassNames = _this.getRecolorByClassNames(legendItem, recolorBy);\n\n          return {\n            value: isNumber(legendItem) ? null : legendItem,\n            cx: recolorByClassNames\n          };\n        });\n        return _objectSpread({}, recolorBy, {\n          legendItemsData: legendItemsData\n        });\n      });\n      return [{\n        label: 'Selection',\n        name: 'none',\n        description: tooltips.sankey.nav.colorBy.none || '',\n        years: selectedYears\n      }].concat(recolorByData);\n    }\n  }, {\n    key: \"getRecolorByItem\",\n    value: function getRecolorByItem(recolorBy, index) {\n      var _this$props2 = this.props,\n          onSelected = _this$props2.onSelected,\n          selectedYears = _this$props2.selectedYears;\n      var isEnabled = !recolorBy.isDisabled && (recolorBy.years.length === 0 || difference(selectedYears, recolorBy.years).length === 0);\n      return React.createElement(\"li\", {\n        key: index,\n        className: cx('dropdown-item', {\n          '-disabled': !isEnabled\n        }),\n        onClick: function onClick() {\n          return isEnabled && onSelected(recolorBy);\n        }\n      }, React.createElement(\"div\", {\n        className: \"dropdown-item-title\"\n      }, recolorBy.label, recolorBy.description && React.createElement(Tooltip, {\n        constraint: \"window\",\n        text: recolorBy.description\n      })), React.createElement(\"div\", {\n        className: \"dropdown-item-legend-container\"\n      }, recolorBy.minValue && React.createElement(\"span\", {\n        className: \"dropdown-item-legend-unit -left\"\n      }, recolorBy.minValue), recolorBy.legendType && React.createElement(\"ul\", {\n        className: cx('dropdown-item-legend', \"-\".concat(recolorBy.legendType))\n      }, recolorBy.legendItemsData.map(function (legendItem, key) {\n        return React.createElement(\"li\", {\n          key: key,\n          className: legendItem.cx\n        }, legendItem.value);\n      })), recolorBy.maxValue && React.createElement(\"span\", {\n        className: \"dropdown-item-legend-unit -right\"\n      }, recolorBy.maxValue)));\n    }\n  }, {\n    key: \"getRecolorByElements\",\n    value: function getRecolorByElements() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          currentDropdown = _this$props3.currentDropdown,\n          id = _this$props3.id;\n\n      if (currentDropdown !== id) {\n        return null;\n      }\n\n      return this.getRecolorData().map(function (recolorBy, index, list) {\n        var hasSeparator = list[index - 1] && list[index - 1].groupNumber !== recolorBy.groupNumber;\n        return React.createElement(React.Fragment, {\n          key: recolorBy.name\n        }, hasSeparator && React.createElement(\"li\", {\n          className: \"dropdown-item -separator\"\n        }), _this2.getRecolorByItem(recolorBy, index));\n      });\n    }\n  }, {\n    key: \"renderLegendSummary\",\n    value: function renderLegendSummary() {\n      var _this3 = this;\n\n      var selectedRecolorBy = this.props.selectedRecolorBy;\n      var legendItems;\n\n      if (selectedRecolorBy.nodes) {\n        legendItems = selectedRecolorBy.nodes.length > 0 ? selectedRecolorBy.nodes : _toConsumableArray(Array(selectedRecolorBy.intervalCount).keys());\n        var currentLegendItemClasses = legendItems.map(function (item) {\n          return _this3.getRecolorByClassNames(item, selectedRecolorBy);\n        });\n\n        if (currentLegendItemClasses.length === 0) {\n          return React.createElement(RecolorByNodeLegendSummary, null);\n        }\n\n        return React.createElement(\"div\", {\n          className: \"dropdown-item-legend-summary\"\n        }, currentLegendItemClasses.map(function (legendItemClasses) {\n          return React.createElement(\"div\", {\n            key: legendItemClasses,\n            className: \"color \".concat(legendItemClasses)\n          });\n        }));\n      }\n\n      return React.createElement(RecolorByNodeLegendSummary, null);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          id = _this$props4.id,\n          className = _this$props4.className,\n          tooltips = _this$props4.tooltips,\n          onToggle = _this$props4.onToggle,\n          currentDropdown = _this$props4.currentDropdown,\n          selectedRecolorBy = _this$props4.selectedRecolorBy,\n          recolorBys = _this$props4.recolorBys;\n      var hasZeroOrSingleElement = recolorBys.length < 1;\n      return React.createElement(\"div\", {\n        className: cx('js-dropdown', className),\n        onClick: function onClick() {\n          return onToggle(id);\n        }\n      }, React.createElement(\"div\", {\n        className: cx('c-dropdown -small -capitalize', {\n          '-hide-only-child': hasZeroOrSingleElement\n        })\n      }, React.createElement(\"span\", {\n        className: \"dropdown-label\"\n      }, \"Recolour by\", React.createElement(Tooltip, {\n        text: tooltips.sankey.nav.colorBy.main\n      })), React.createElement(\"span\", {\n        className: \"dropdown-title -small\"\n      }, selectedRecolorBy.label || 'Selection'), React.createElement(FiltersDropdown, {\n        id: id,\n        currentDropdown: currentDropdown,\n        onClickOutside: onToggle\n      }, React.createElement(\"ul\", {\n        className: \"dropdown-list -large\"\n      }, this.getRecolorByElements()))), this.renderLegendSummary());\n    }\n  }]);\n\n  return RecolorBySelector;\n}(Component);\n\nRecolorBySelector.propTypes = {\n  id: PropTypes.string,\n  className: PropTypes.string,\n  tooltips: PropTypes.object,\n  onToggle: PropTypes.func,\n  onSelected: PropTypes.func,\n  currentDropdown: PropTypes.string,\n  selectedRecolorBy: PropTypes.object,\n  recolorBys: PropTypes.array,\n  selectedYears: PropTypes.array\n};\nvar _default = RecolorBySelector;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_typeof, \"_typeof\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_objectSpread, \"_objectSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_defineProperty, \"_defineProperty\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_toConsumableArray, \"_toConsumableArray\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_nonIterableSpread, \"_nonIterableSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_iterableToArray, \"_iterableToArray\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_arrayWithoutHoles, \"_arrayWithoutHoles\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_classCallCheck, \"_classCallCheck\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_defineProperties, \"_defineProperties\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_createClass, \"_createClass\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_possibleConstructorReturn, \"_possibleConstructorReturn\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_assertThisInitialized, \"_assertThisInitialized\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_getPrototypeOf, \"_getPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_inherits, \"_inherits\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_setPrototypeOf, \"_setPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(RecolorBySelector, \"RecolorBySelector\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/nav/filters-nav/recolor-by-selector/recolor-by-selector.component.jsx"],"names":["RecolorBySelector","Component","item","recolorBy","recolorById","isNumber","parseInt","legendTypeName","legendColorThemeName","recolorBys","selectedYears","tooltips","recolorByData","legendItems","Array","legendItemsData","recolorByClassNames","value","cx","label","name","description","years","index","onSelected","isEnabled","difference","legendItem","currentDropdown","id","hasSeparator","list","selectedRecolorBy","currentLegendItemClasses","className","onToggle","hasZeroOrSingleElement","main","PropTypes","array"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;AACA,OAAA,KAAA,IAAA,SAAA,QAAA,OAAA;AACA,OAAA,SAAA,MAAA,YAAA;AACA,OAAA,OAAA,MAAA,6DAAA;AACA,OAAA,eAAA,MAAA,6DAAA;AACA,OAAA,0BAAA,MAAA,8HAAA;AACA,OAAA,EAAA,MAAA,YAAA;AACA,OAAA,QAAA,MAAA,iBAAA;AACA,OAAA,UAAA,MAAA,mBAAA;AACA,OAAA,MAAA,MAAA,eAAA;AAEA,OAAA,4DAAA;;IAEMA,iB;;;;;;;;;;;;;2CACmBE,I,EAAMC,S,EAAW;AACtC,UAAMC,WAAW,GAAGC,QAAQ,CAARA,IAAQ,CAARA,GAChBH,IAAI,GAAGI,QAAQ,CAACH,SAAS,CAAV,QAAA,EADCE,EACD,CADCA,GAEhBH,IAAI,CAFR,WAEIA,EAFJ;AAIA,UAAMK,cAAc,GAAGJ,SAAS,CAATA,UAAAA,CAAvB,WAAuBA,EAAvB;AACA,UAAMK,oBAAoB,GAAGL,SAAS,CAATA,gBAAAA,CAA7B,WAA6BA,EAA7B;AACA,aAAO,cAAA,MAAA,CAAA,cAAA,EAAA,GAAA,EAAA,MAAA,CAAA,oBAAA,EAAA,GAAA,EAAA,MAAA,CAAA,WAAA,EAAA,OAAA,CAAA,IAAA,EAAP,GAAO,CAAP;AACD;;;qCAEgB;AAAA,UAAA,KAAA,GAAA,IAAA;;AAAA,UAAA,WAAA,GACiC,KADjC,KAAA;AAAA,UACPM,UADO,GAAA,WAAA,CAAA,UAAA;AAAA,UACKC,aADL,GAAA,WAAA,CAAA,aAAA;AAAA,UACoBC,QADpB,GAAA,WAAA,CAAA,QAAA;AAEf,UAAMC,aAAa,GAAG,MAAM,CAAA,UAAA,EAAa,CAAA,aAAA,EAAnB,UAAmB,CAAb,CAAN,CAAA,GAAA,CAAoD,UAAA,SAAA,EAAa;AACrF,YAAMC,WAAW,GACfV,SAAS,CAATA,KAAAA,CAAAA,MAAAA,GAAAA,CAAAA,GAA6BA,SAAS,CAAtCA,KAAAA,GAAAA,kBAAAA,CAAmDW,KAAK,CAACX,SAAS,CAAfW,aAAK,CAALA,CADrD,IACqDA,EAAnDX,CADF;AAEA,YAAMY,eAAe,GAAG,WAAW,CAAX,GAAA,CAAgB,UAAA,UAAA,EAAc;AACpD,cAAMC,mBAAmB,GAAG,KAAI,CAAJ,sBAAA,CAAA,UAAA,EAA5B,SAA4B,CAA5B;;AACA,iBAAO;AACLC,YAAAA,KAAK,EAAEZ,QAAQ,CAARA,UAAQ,CAARA,GAAAA,IAAAA,GADF,UAAA;AAELa,YAAAA,EAAE,EAAEF;AAFC,WAAP;AAFF,SAAwB,CAAxB;AAOA,eAAA,aAAA,CAAA,EAAA,EAAA,SAAA,EAAA;AAAuBD,UAAAA,eAAe,EAAfA;AAAvB,SAAA,CAAA;AAVF,OAAsB,CAAtB;AAaA,aAAO,CACL;AACEI,QAAAA,KAAK,EADP,WAAA;AAEEC,QAAAA,IAAI,EAFN,MAAA;AAGEC,QAAAA,WAAW,EAAEV,QAAQ,CAARA,MAAAA,CAAAA,GAAAA,CAAAA,OAAAA,CAAAA,IAAAA,IAHf,EAAA;AAIEW,QAAAA,KAAK,EAAEZ;AAJT,OADK,EAAA,MAAA,CAAP,aAAO,CAAP;AAQD;;;qCAEgBP,S,EAAWoB,K,EAAO;AAAA,UAAA,YAAA,GACK,KADL,KAAA;AAAA,UACzBC,UADyB,GAAA,YAAA,CAAA,UAAA;AAAA,UACbd,aADa,GAAA,YAAA,CAAA,aAAA;AAEjC,UAAMe,SAAS,GACb,CAACtB,SAAS,CAAV,UAAA,KACCA,SAAS,CAATA,KAAAA,CAAAA,MAAAA,KAAAA,CAAAA,IAAgCuB,UAAU,CAAA,aAAA,EAAgBvB,SAAS,CAAnCuB,KAAU,CAAVA,CAAAA,MAAAA,KAFnC,CACE,CADF;AAIA,aACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACE,QAAA,GAAG,EADL,KAAA;AAEE,QAAA,SAAS,EAAER,EAAE,CAAA,eAAA,EAAkB;AAAE,uBAAa,CAACO;AAAhB,SAAlB,CAFf;AAGE,QAAA,OAAO,EAAE,SAAA,OAAA,GAAA;AAAA,iBAAMA,SAAS,IAAID,UAAU,CAA7B,SAA6B,CAA7B;AAAA;AAHX,OAAA,EAKE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EACGrB,SAAS,CADZ,KAAA,EAEGA,SAAS,CAATA,WAAAA,IAAyB,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AAAS,QAAA,UAAU,EAAnB,QAAA;AAA6B,QAAA,IAAI,EAAEA,SAAS,CAACkB;AAA7C,OAAA,CAF5B,CALF,EASE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EACGlB,SAAS,CAATA,QAAAA,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,QAAA,SAAS,EAAC;AAAhB,OAAA,EAAmDA,SAAS,CAFhE,QAEI,CAFJ,EAIGA,SAAS,CAATA,UAAAA,IACC,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,QAAA,SAAS,EAAEe,EAAE,CAAA,sBAAA,EAAA,IAAA,MAAA,CAA6Bf,SAAS,CAAtC,UAAA,CAAA;AAAjB,OAAA,EACG,SAAS,CAAT,eAAA,CAAA,GAAA,CAA8B,UAAA,UAAA,EAAA,GAAA,EAAA;AAAA,eAC7B,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,UAAA,GAAG,EAAP,GAAA;AAAc,UAAA,SAAS,EAAEwB,UAAU,CAACT;AAApC,SAAA,EACGS,UAAU,CAFgB,KAC7B,CAD6B;AANrC,OAMO,CADH,CALJ,EAaGxB,SAAS,CAATA,QAAAA,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,QAAA,SAAS,EAAC;AAAhB,OAAA,EAAoDA,SAAS,CAxBrE,QAwBQ,CAdJ,CATF,CADF;AA6BD;;;2CAEsB;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UAAA,YAAA,GACW,KADX,KAAA;AAAA,UACbyB,eADa,GAAA,YAAA,CAAA,eAAA;AAAA,UACIC,EADJ,GAAA,YAAA,CAAA,EAAA;;AAErB,UAAID,eAAe,KAAnB,EAAA,EAA4B;AAC1B,eAAA,IAAA;AACD;;AAED,aAAO,KAAA,cAAA,GAAA,GAAA,CAA0B,UAAA,SAAA,EAAA,KAAA,EAAA,IAAA,EAA4B;AAC3D,YAAME,YAAY,GAAGC,IAAI,CAACR,KAAK,GAAVQ,CAAI,CAAJA,IAAmBA,IAAI,CAACR,KAAK,GAAVQ,CAAI,CAAJA,CAAAA,WAAAA,KAAgC5B,SAAS,CAAjF,WAAA;AACA,eACE,KAAA,CAAA,aAAA,CAAC,KAAD,CAAA,QAAA,EAAA;AAAgB,UAAA,GAAG,EAAEA,SAAS,CAACiB;AAA/B,SAAA,EACGU,YAAY,IAAI,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,UAAA,SAAS,EAAC;AAAd,SAAA,CADnB,EAEG,MAAI,CAAJ,gBAAA,CAAA,SAAA,EAHL,KAGK,CAFH,CADF;AAFF,OAAO,CAAP;AASD;;;0CAEqB;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UACZE,iBADY,GACU,KADV,KACU,CADV,iBAAA;AAEpB,UAAA,WAAA;;AACA,UAAIA,iBAAiB,CAArB,KAAA,EAA6B;AAC3BnB,QAAAA,WAAW,GACTmB,iBAAiB,CAAjBA,KAAAA,CAAAA,MAAAA,GAAAA,CAAAA,GACIA,iBAAiB,CADrBA,KAAAA,GAAAA,kBAAAA,CAEQlB,KAAK,CAACkB,iBAAiB,CAAvBlB,aAAK,CAALA,CAHVD,IAGUC,EAFRkB,CADFnB;AAIA,YAAMoB,wBAAwB,GAAG,WAAW,CAAX,GAAA,CAAgB,UAAA,IAAA,EAAI;AAAA,iBACnD,MAAI,CAAJ,sBAAA,CAAA,IAAA,EADmD,iBACnD,CADmD;AAArD,SAAiC,CAAjC;;AAIA,YAAIA,wBAAwB,CAAxBA,MAAAA,KAAJ,CAAA,EAA2C;AACzC,iBAAO,KAAA,CAAA,aAAA,CAAA,0BAAA,EAAP,IAAO,CAAP;AACD;;AAED,eACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,UAAA,SAAS,EAAC;AAAf,SAAA,EACG,wBAAwB,CAAxB,GAAA,CAA6B,UAAA,iBAAA,EAAiB;AAAA,iBAC7C,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,YAAA,GAAG,EAAR,iBAAA;AAA6B,YAAA,SAAS,EAAA,SAAA,MAAA,CAAA,iBAAA;AAAtC,WAAA,CAD6C;AAFnD,SAEK,CADH,CADF;AAOD;;AACD,aAAO,KAAA,CAAA,aAAA,CAAA,0BAAA,EAAP,IAAO,CAAP;AACD;;;6BAEQ;AAAA,UAAA,YAAA,GASH,KATG,KAAA;AAAA,UAELJ,EAFK,GAAA,YAAA,CAAA,EAAA;AAAA,UAGLK,SAHK,GAAA,YAAA,CAAA,SAAA;AAAA,UAILvB,QAJK,GAAA,YAAA,CAAA,QAAA;AAAA,UAKLwB,QALK,GAAA,YAAA,CAAA,QAAA;AAAA,UAMLP,eANK,GAAA,YAAA,CAAA,eAAA;AAAA,UAOLI,iBAPK,GAAA,YAAA,CAAA,iBAAA;AAAA,UAQLvB,UARK,GAAA,YAAA,CAAA,UAAA;AAUP,UAAM2B,sBAAsB,GAAG3B,UAAU,CAAVA,MAAAA,GAA/B,CAAA;AACA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAES,EAAE,CAAA,aAAA,EAAlB,SAAkB,CAAlB;AAA8C,QAAA,OAAO,EAAE,SAAA,OAAA,GAAA;AAAA,iBAAMiB,QAAQ,CAAd,EAAc,CAAd;AAAA;AAAvD,OAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,QAAA,SAAS,EAAEjB,EAAE,CAAA,+BAAA,EAAkC;AAC7C,8BAAoBkB;AADyB,SAAlC;AADf,OAAA,EAKE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,QAAA,SAAS,EAAC;AAAhB,OAAA,EAAA,aAAA,EAEE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AAAS,QAAA,IAAI,EAAEzB,QAAQ,CAARA,MAAAA,CAAAA,GAAAA,CAAAA,OAAAA,CAA4B0B;AAA3C,OAAA,CAFF,CALF,EASE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,QAAA,SAAS,EAAC;AAAhB,OAAA,EAAyCL,iBAAiB,CAAjBA,KAAAA,IAT3C,WASE,CATF,EAUE,KAAA,CAAA,aAAA,CAAA,eAAA,EAAA;AAAiB,QAAA,EAAE,EAAnB,EAAA;AAAyB,QAAA,eAAe,EAAxC,eAAA;AAA2D,QAAA,cAAc,EAAEG;AAA3E,OAAA,EACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI,QAAA,SAAS,EAAC;AAAd,OAAA,EAAsC,KAZ5C,oBAY4C,EAAtC,CADF,CAVF,CADF,EAeG,KAhBL,mBAgBK,EAfH,CADF;AAmBD;;;;EAnJ6BlC,S;;AAsJhCD,iBAAiB,CAAjBA,SAAAA,GAA8B;AAC5B6B,EAAAA,EAAE,EAAES,SAAS,CADe,MAAA;AAE5BJ,EAAAA,SAAS,EAAEI,SAAS,CAFQ,MAAA;AAG5B3B,EAAAA,QAAQ,EAAE2B,SAAS,CAHS,MAAA;AAI5BH,EAAAA,QAAQ,EAAEG,SAAS,CAJS,IAAA;AAK5Bd,EAAAA,UAAU,EAAEc,SAAS,CALO,IAAA;AAM5BV,EAAAA,eAAe,EAAEU,SAAS,CANE,MAAA;AAO5BN,EAAAA,iBAAiB,EAAEM,SAAS,CAPA,MAAA;AAQ5B7B,EAAAA,UAAU,EAAE6B,SAAS,CARO,KAAA;AAS5B5B,EAAAA,aAAa,EAAE4B,SAAS,CAACC;AATG,CAA9BvC;eAYA,iB;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAlKMA,iB","sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions,jsx-a11y/no-noninteractive-element-interactions */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'react-components/shared/help-tooltip/help-tooltip.component';\nimport FiltersDropdown from 'react-components/nav/filters-nav/filters-dropdown.component';\nimport RecolorByNodeLegendSummary from 'react-components/nav/filters-nav/recolor-by-selector/recolor-by-node-legend-summary/recolor-by-node-legend-summary.container';\nimport cx from 'classnames';\nimport isNumber from 'lodash/isNumber';\nimport difference from 'lodash/difference';\nimport sortBy from 'lodash/sortBy';\n\nimport 'styles/components/shared/dropdown-item-legend-summary.scss';\n\nclass RecolorBySelector extends Component {\n  getRecolorByClassNames(item, recolorBy) {\n    const recolorById = isNumber(item)\n      ? item + parseInt(recolorBy.minValue, 10)\n      : item.toLowerCase();\n\n    const legendTypeName = recolorBy.legendType.toLowerCase();\n    const legendColorThemeName = recolorBy.legendColorTheme.toLowerCase();\n    return `-recolorby-${legendTypeName}-${legendColorThemeName}-${recolorById}`.replace(/ /g, '-');\n  }\n\n  getRecolorData() {\n    const { recolorBys, selectedYears, tooltips } = this.props;\n    const recolorByData = sortBy(recolorBys, ['groupNumber', 'position']).map(recolorBy => {\n      const legendItems =\n        recolorBy.nodes.length > 0 ? recolorBy.nodes : [...Array(recolorBy.intervalCount).keys()];\n      const legendItemsData = legendItems.map(legendItem => {\n        const recolorByClassNames = this.getRecolorByClassNames(legendItem, recolorBy);\n        return {\n          value: isNumber(legendItem) ? null : legendItem,\n          cx: recolorByClassNames\n        };\n      });\n      return { ...recolorBy, legendItemsData };\n    });\n\n    return [\n      {\n        label: 'Selection',\n        name: 'none',\n        description: tooltips.sankey.nav.colorBy.none || '',\n        years: selectedYears\n      }\n    ].concat(recolorByData);\n  }\n\n  getRecolorByItem(recolorBy, index) {\n    const { onSelected, selectedYears } = this.props;\n    const isEnabled =\n      !recolorBy.isDisabled &&\n      (recolorBy.years.length === 0 || difference(selectedYears, recolorBy.years).length === 0);\n\n    return (\n      <li\n        key={index}\n        className={cx('dropdown-item', { '-disabled': !isEnabled })}\n        onClick={() => isEnabled && onSelected(recolorBy)}\n      >\n        <div className=\"dropdown-item-title\">\n          {recolorBy.label}\n          {recolorBy.description && <Tooltip constraint=\"window\" text={recolorBy.description} />}\n        </div>\n        <div className=\"dropdown-item-legend-container\">\n          {recolorBy.minValue && (\n            <span className=\"dropdown-item-legend-unit -left\">{recolorBy.minValue}</span>\n          )}\n          {recolorBy.legendType && (\n            <ul className={cx('dropdown-item-legend', `-${recolorBy.legendType}`)}>\n              {recolorBy.legendItemsData.map((legendItem, key) => (\n                <li key={key} className={legendItem.cx}>\n                  {legendItem.value}\n                </li>\n              ))}\n            </ul>\n          )}\n          {recolorBy.maxValue && (\n            <span className=\"dropdown-item-legend-unit -right\">{recolorBy.maxValue}</span>\n          )}\n        </div>\n      </li>\n    );\n  }\n\n  getRecolorByElements() {\n    const { currentDropdown, id } = this.props;\n    if (currentDropdown !== id) {\n      return null;\n    }\n\n    return this.getRecolorData().map((recolorBy, index, list) => {\n      const hasSeparator = list[index - 1] && list[index - 1].groupNumber !== recolorBy.groupNumber;\n      return (\n        <React.Fragment key={recolorBy.name}>\n          {hasSeparator && <li className=\"dropdown-item -separator\" />}\n          {this.getRecolorByItem(recolorBy, index)}\n        </React.Fragment>\n      );\n    });\n  }\n\n  renderLegendSummary() {\n    const { selectedRecolorBy } = this.props;\n    let legendItems;\n    if (selectedRecolorBy.nodes) {\n      legendItems =\n        selectedRecolorBy.nodes.length > 0\n          ? selectedRecolorBy.nodes\n          : [...Array(selectedRecolorBy.intervalCount).keys()];\n      const currentLegendItemClasses = legendItems.map(item =>\n        this.getRecolorByClassNames(item, selectedRecolorBy)\n      );\n\n      if (currentLegendItemClasses.length === 0) {\n        return <RecolorByNodeLegendSummary />;\n      }\n\n      return (\n        <div className=\"dropdown-item-legend-summary\">\n          {currentLegendItemClasses.map(legendItemClasses => (\n            <div key={legendItemClasses} className={`color ${legendItemClasses}`} />\n          ))}\n        </div>\n      );\n    }\n    return <RecolorByNodeLegendSummary />;\n  }\n\n  render() {\n    const {\n      id,\n      className,\n      tooltips,\n      onToggle,\n      currentDropdown,\n      selectedRecolorBy,\n      recolorBys\n    } = this.props;\n    const hasZeroOrSingleElement = recolorBys.length < 1;\n    return (\n      <div className={cx('js-dropdown', className)} onClick={() => onToggle(id)}>\n        <div\n          className={cx('c-dropdown -small -capitalize', {\n            '-hide-only-child': hasZeroOrSingleElement\n          })}\n        >\n          <span className=\"dropdown-label\">\n            Recolour by\n            <Tooltip text={tooltips.sankey.nav.colorBy.main} />\n          </span>\n          <span className=\"dropdown-title -small\">{selectedRecolorBy.label || 'Selection'}</span>\n          <FiltersDropdown id={id} currentDropdown={currentDropdown} onClickOutside={onToggle}>\n            <ul className=\"dropdown-list -large\">{this.getRecolorByElements()}</ul>\n          </FiltersDropdown>\n        </div>\n        {this.renderLegendSummary()}\n      </div>\n    );\n  }\n}\n\nRecolorBySelector.propTypes = {\n  id: PropTypes.string,\n  className: PropTypes.string,\n  tooltips: PropTypes.object,\n  onToggle: PropTypes.func,\n  onSelected: PropTypes.func,\n  currentDropdown: PropTypes.string,\n  selectedRecolorBy: PropTypes.object,\n  recolorBys: PropTypes.array,\n  selectedYears: PropTypes.array\n};\n\nexport default RecolorBySelector;\n"]}]}
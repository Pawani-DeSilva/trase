{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/app.thunks.js","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/app.thunks.js","mtime":1548345115599},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1548840716937},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport { SET_TOOLTIPS, SET_CONTEXTS, selectInitialContextById, APP__SET_LOADING } from 'scripts/actions/app.actions';\nimport { GET_TOOLTIPS_URL, getURLFromParams, GET_CONTEXTS_URL } from 'scripts/utils/getURLFromParams';\nimport { getCurrentContext } from 'scripts/reducers/helpers/contextHelper';\n\nfunction loadTooltipsPromise(dispatch, getState) {\n  var _getState = getState(),\n      app = _getState.app;\n\n  if (app.loading.tooltips || app.tooltips !== null) {\n    return Promise.resolve();\n  }\n\n  var tooltipsURL = getURLFromParams(GET_TOOLTIPS_URL);\n  dispatch({\n    type: APP__SET_LOADING,\n    payload: {\n      tooltips: true\n    }\n  });\n  return new Promise(function (resolve) {\n    return fetch(tooltipsURL).then(function (res) {\n      return res.ok ? res.json() : Promise.reject(res.statusText);\n    }).then(function (data) {\n      dispatch({\n        type: SET_TOOLTIPS,\n        payload: data\n      });\n    }).then(function () {\n      return resolve();\n    });\n  });\n}\n\nfunction loadContextsPromise(dispatch, getState) {\n  var _getState2 = getState(),\n      app = _getState2.app; // Contexts should only load once\n\n\n  if (app.loading.contexts || app.contexts.length > 0) {\n    return Promise.resolve();\n  }\n\n  var sortContexts = function sortContexts(a, b) {\n    if (a.id < b.id) return -1;\n    if (a.id > b.id) return 1;\n    return 0;\n  };\n\n  var contextURL = getURLFromParams(GET_CONTEXTS_URL);\n  dispatch({\n    type: APP__SET_LOADING,\n    payload: {\n      contexts: true\n    }\n  });\n  return fetch(contextURL).then(function (resp) {\n    return resp.json();\n  }).then(function (json) {\n    var contexts = json.data.sort(sortContexts);\n    dispatch({\n      type: SET_CONTEXTS,\n      payload: contexts\n    });\n    var state = getState();\n    var currentContext = getCurrentContext(state);\n    dispatch(selectInitialContextById(currentContext.id));\n  });\n}\n\nvar _default = function _default(dispatch, getState) {\n  return Promise.all([loadTooltipsPromise(dispatch, getState), loadContextsPromise(dispatch, getState)]).catch(function (e) {\n    return console.error(e);\n  });\n};\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(loadTooltipsPromise, \"loadTooltipsPromise\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/app.thunks.js\");\n  reactHotLoader.register(loadContextsPromise, \"loadContextsPromise\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/app.thunks.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/app.thunks.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/app.thunks.js"],"names":["app","getState","Promise","tooltipsURL","getURLFromParams","dispatch","type","payload","tooltips","res","data","resolve","sortContexts","a","b","contextURL","contexts","resp","json","state","currentContext","getCurrentContext","selectInitialContextById","loadTooltipsPromise","loadContextsPromise","console"],"mappings":"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","sourcesContent":["import {\n  SET_TOOLTIPS,\n  SET_CONTEXTS,\n  selectInitialContextById,\n  APP__SET_LOADING\n} from 'scripts/actions/app.actions';\nimport {\n  GET_TOOLTIPS_URL,\n  getURLFromParams,\n  GET_CONTEXTS_URL\n} from 'scripts/utils/getURLFromParams';\nimport { getCurrentContext } from 'scripts/reducers/helpers/contextHelper';\n\nfunction loadTooltipsPromise(dispatch, getState) {\n  const { app } = getState();\n  if (app.loading.tooltips || app.tooltips !== null) {\n    return Promise.resolve();\n  }\n\n  const tooltipsURL = getURLFromParams(GET_TOOLTIPS_URL);\n\n  dispatch({\n    type: APP__SET_LOADING,\n    payload: { tooltips: true }\n  });\n\n  return new Promise(resolve =>\n    fetch(tooltipsURL)\n      .then(res => (res.ok ? res.json() : Promise.reject(res.statusText)))\n      .then(data => {\n        dispatch({\n          type: SET_TOOLTIPS,\n          payload: data\n        });\n      })\n      .then(() => resolve())\n  );\n}\n\nfunction loadContextsPromise(dispatch, getState) {\n  const { app } = getState();\n  // Contexts should only load once\n  if (app.loading.contexts || app.contexts.length > 0) {\n    return Promise.resolve();\n  }\n\n  const sortContexts = (a, b) => {\n    if (a.id < b.id) return -1;\n    if (a.id > b.id) return 1;\n    return 0;\n  };\n  const contextURL = getURLFromParams(GET_CONTEXTS_URL);\n  dispatch({\n    type: APP__SET_LOADING,\n    payload: { contexts: true }\n  });\n  return fetch(contextURL)\n    .then(resp => resp.json())\n    .then(json => {\n      const contexts = json.data.sort(sortContexts);\n\n      dispatch({\n        type: SET_CONTEXTS,\n        payload: contexts\n      });\n\n      const state = getState();\n\n      const currentContext = getCurrentContext(state);\n\n      dispatch(selectInitialContextById(currentContext.id));\n    });\n}\n\nexport default function(dispatch, getState) {\n  return Promise.all([\n    loadTooltipsPromise(dispatch, getState),\n    loadContextsPromise(dispatch, getState)\n  ]).catch(e => console.error(e));\n}\n"]}]}